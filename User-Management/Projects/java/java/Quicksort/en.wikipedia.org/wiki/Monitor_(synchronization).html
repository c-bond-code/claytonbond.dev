<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from en.wikipedia.org/wiki/Monitor_(synchronization) by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 May 2022 18:31:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Monitor (synchronization) - Wikipedia</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"aca98dc1-3846-43b9-9b00-9b7d55ee03a2","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Monitor_(synchronization)","wgTitle":"Monitor (synchronization)","wgCurRevisionId":1077136218,"wgRevisionId":1077136218,"wgArticleId":1367789,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles with short description","Short description is different from Wikidata","Articles needing cleanup from January 2014","All pages needing cleanup","Articles containing how-to sections","All articles with specifically marked weasel-worded phrases",
"Articles with specifically marked weasel-worded phrases from March 2019","Wikipedia articles that are too technical from January 2014","All articles that are too technical","Wikipedia external links cleanup from March 2013","Wikipedia spam cleanup from March 2013","Programming constructs","Concurrency control","Software design patterns"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Monitor_(synchronization)","wgRelevantArticleId":1367789,"wgIsProbablyEditable":true,"wgRelevantPageIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgFlaggedRevsParams":{"tags":{"status":{"levels":1}}},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":70000,"wgNoticeProject":"wikipedia","wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault"
:true,"wgPopupsFlags":10,"wgULSCurrentAutonym":"English","wgEditSubmitButtonLabelPublish":true,"wgCentralAuthMobileDomain":false,"wgULSPosition":"interlanguage","wgULSisCompactLinksEnabled":true,"wgWikibaseItemId":"Q1062162"};RLSTATE={"ext.globalCssJs.user.styles":"ready","site.styles":"ready","user.styles":"ready","ext.globalCssJs.user":"ready","user":"ready","user.options":"loading","ext.cite.styles":"ready","ext.pygments":"ready","ext.math.styles":"ready","skins.vector.styles.legacy":"ready","jquery.makeCollapsible.styles":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.wikimediaBadges":"ready","ext.uls.interlanguage":"ready","wikibase.client.init":"ready"};RLPAGEMODULES=["ext.cite.ux-enhancements","ext.math.scripts","site","mediawiki.page.ready","jquery.makeCollapsible","mediawiki.toc","https://en.wikipedia.org/wiki/skins.vector.legacy.js","mmv.head","mmv.bootstrap.autostart","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.eventLogging",
"ext.wikimediaEvents","ext.navigationTiming","ext.cx.eventlogging.campaigns","ext.centralNotice.geoIP","ext.centralNotice.startUp","ext.gadget.ReferenceTooltips","ext.gadget.charinsert","ext.gadget.extra-toolbar-buttons","ext.gadget.refToolbar","ext.gadget.switcher","ext.centralauth.centralautologin","ext.popups","ext.uls.compactlinks","ext.uls.interface","ext.growthExperiments.SuggestedEditSession"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://en.wikipedia.org/w/load.php?lang=en&amp;modules=ext.cite.styles%7Cext.math.styles%7Cext.pygments%2CwikimediaBadges%7Cext.uls.interlanguage%7Cext.visualEditor.desktopArticleTarget.noscript%7Cjquery.makeCollapsible.styles%7Cskins.vector.styles.legacy%7Cwikibase.client.init&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://en.wikipedia.org/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://en.wikipedia.org/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.0-wmf.10"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-crossorigin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta property="og:title" content="Monitor (synchronization) - Wikipedia"/>
<meta property="og:type" content="website"/>
<link rel="preconnect" href="http://upload.wikimedia.org/"/>
<link rel="alternate" media="only screen and (max-width: 720px)" href="http://en.m.wikipedia.org/wiki/Monitor_(synchronization)"/>
<link rel="alternate" type="application/x-wiki" title="Edit this page" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit"/>
<link rel="apple-touch-icon" href="https://en.wikipedia.org/static/apple-touch/wikipedia.png"/>
<link rel="shortcut icon" href="https://en.wikipedia.org/static/favicon/wikipedia.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://en.wikipedia.org/w/opensearch_desc.php" title="Wikipedia (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://en.wikipedia.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="canonical" href="https://en.wikipedia.org/wiki/Monitor_(synchronization)"/>
<link rel="dns-prefetch" href="http://meta.wikimedia.org/" />
<link rel="dns-prefetch" href="http://login.wikimedia.org/"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Monitor_synchronization rootpage-Monitor_synchronization skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"><!-- CentralNotice --></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Monitor (synchronization)</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Wikipedia, the free encyclopedia</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div class="shortdescription nomobile noexcerpt noprint searchaux" style="display:none">Object or module in concurrent programming</div>
<table class="box-Howto plainlinks metadata ambox ambox-content" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><img alt="" src="http://upload.wikimedia.org/wikipedia/en/thumb/b/b4/Ambox_important.svg/40px-Ambox_important.svg.png" decoding="async" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/en/thumb/b/b4/Ambox_important.svg/60px-Ambox_important.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/b/b4/Ambox_important.svg/80px-Ambox_important.svg.png 2x" data-file-width="40" data-file-height="40" /></div></td><td class="mbox-text"><div class="mbox-text-span">This article <b>contains <a href="https://en.wikipedia.org/wiki/Wikipedia:What_Wikipedia_is_not#NOTHOWTO" title="Wikipedia:What Wikipedia is not">instructions, advice, or how-to content</a></b>.<span class="hide-when-compact"> The purpose of Wikipedia is to present facts, not to train. Please help <a class="external text" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit">improve this article</a> either by rewriting the how-to content or by <a href="https://meta.wikimedia.org/wiki/Help:Transwiki" class="extiw" title="m:Help:Transwiki">moving</a> it to <a href="https://en.wikiversity.org/wiki/" class="extiw" title="v:">Wikiversity</a>, <a href="https://en.wikibooks.org/wiki/" class="extiw" title="b:">Wikibooks</a> or <a href="https://en.wikivoyage.org/wiki/" class="extiw" title="voy:">Wikivoyage</a>.</span>  <span class="date-container"><i>(<span class="date">January 2014</span>)</i></span></div></td></tr></tbody></table>
<p>In <a href="https://en.wikipedia.org/wiki/Concurrent_computing" title="Concurrent computing">concurrent programming</a>, a <b>monitor</b> is a synchronization construct that allows <a href="https://en.wikipedia.org/wiki/Thread_(computing)" title="Thread (computing)">threads</a> to have both <a href="https://en.wikipedia.org/wiki/Mutual_exclusion" title="Mutual exclusion">mutual exclusion</a> and the ability to wait (block) for a certain condition to become false.  Monitors also have a mechanism for signaling other threads that their condition has been met. A monitor consists of a <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" title="Lock (computer science)">mutex (lock)</a> object and <b>condition variables</b>.  A <b>condition variable</b> essentially is a container of threads that are waiting for a certain condition.  Monitors provide a mechanism for threads to temporarily give up exclusive access in order to wait for some condition to be met, before regaining exclusive access and resuming their task.
</p><p>Another definition of <b>monitor</b> is a <b>thread-safe</b> <a href="https://en.wikipedia.org/wiki/Class_(computer_science)" class="mw-redirect" title="Class (computer science)">class</a>, <a href="https://en.wikipedia.org/wiki/Object_(computer_science)" title="Object (computer science)">object</a>, or <a href="https://en.wikipedia.org/wiki/Module_(programming)" class="mw-redirect" title="Module (programming)">module</a> that wraps around a <a href="https://en.wikipedia.org/wiki/Mutual_exclusion" title="Mutual exclusion">mutex</a> in order to safely allow access to a method or variable by more than one <a href="https://en.wikipedia.org/wiki/Thread_(computer_science)" class="mw-redirect" title="Thread (computer science)">thread</a>.  The defining characteristic of a monitor is that its methods are executed with <a href="https://en.wikipedia.org/wiki/Mutual_exclusion" title="Mutual exclusion">mutual exclusion</a>: At each point in time, at most one thread may be executing any of its <a href="https://en.wikipedia.org/wiki/Method_(computer_science)" class="mw-redirect" title="Method (computer science)">methods</a>. By using one or more condition variables it can also provide the ability for threads to wait on a certain condition (thus using the above definition of a "monitor").  For the rest of this article, this sense of "monitor" will be referred to as a "thread-safe object/class/module".
</p><p>Monitors were invented by <a href="https://en.wikipedia.org/wiki/Per_Brinch_Hansen" title="Per Brinch Hansen">Per Brinch Hansen</a><sup id="cite_ref-:0_1-0" class="reference"><a href="#cite_note-:0-1">&#91;1&#93;</a></sup> and <a href="https://en.wikipedia.org/wiki/C._A._R._Hoare" class="mw-redirect" title="C. A. R. Hoare">C. A. R. Hoare</a>,<sup id="cite_ref-:1_2-0" class="reference"><a href="#cite_note-:1-2">&#91;2&#93;</a></sup> and were first implemented in <a href="https://en.wikipedia.org/wiki/Per_Brinch_Hansen" title="Per Brinch Hansen">Brinch Hansen's</a> <a href="https://en.wikipedia.org/wiki/Concurrent_Pascal" title="Concurrent Pascal">Concurrent Pascal</a> language.<sup id="cite_ref-3" class="reference"><a href="#cite_note-3">&#91;3&#93;</a></sup>
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Mutual_exclusion"><span class="tocnumber">1</span> <span class="toctext">Mutual exclusion</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Condition_variables"><span class="tocnumber">2</span> <span class="toctext">Condition variables</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Problem_statement"><span class="tocnumber">2.1</span> <span class="toctext">Problem statement</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Case_study:_classic_bounded_producer/consumer_problem"><span class="tocnumber">2.2</span> <span class="toctext">Case study: classic bounded producer/consumer problem</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Incorrect_without_synchronization"><span class="tocnumber">2.2.1</span> <span class="toctext">Incorrect without synchronization</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Spin-waiting"><span class="tocnumber">2.2.2</span> <span class="toctext">Spin-waiting</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Condition_variables_2"><span class="tocnumber">2.3</span> <span class="toctext">Condition variables</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Monitor_usage"><span class="tocnumber">2.4</span> <span class="toctext">Monitor usage</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Solving_the_bounded_producer/consumer_problem"><span class="tocnumber">2.4.1</span> <span class="toctext">Solving the bounded producer/consumer problem</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Synchronization_primitives"><span class="tocnumber">2.5</span> <span class="toctext">Synchronization primitives</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Sample_Mesa-monitor_implementation_with_Test-and-Set"><span class="tocnumber">2.5.1</span> <span class="toctext">Sample Mesa-monitor implementation with Test-and-Set</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Semaphore"><span class="tocnumber">2.6</span> <span class="toctext">Semaphore</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Monitor_implemented_using_semaphores"><span class="tocnumber">2.6.1</span> <span class="toctext">Monitor implemented using semaphores</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Blocking_condition_variables"><span class="tocnumber">2.7</span> <span class="toctext">Blocking condition variables</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Nonblocking_condition_variables"><span class="tocnumber">2.8</span> <span class="toctext">Nonblocking condition variables</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Implicit_condition_variable_monitors"><span class="tocnumber">2.9</span> <span class="toctext">Implicit condition variable monitors</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Implicit_signaling"><span class="tocnumber">2.10</span> <span class="toctext">Implicit signaling</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#History"><span class="tocnumber">3</span> <span class="toctext">History</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Notes"><span class="tocnumber">5</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Further_reading"><span class="tocnumber">6</span> <span class="toctext">Further reading</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#External_links"><span class="tocnumber">7</span> <span class="toctext">External links</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Mutual_exclusion">Mutual exclusion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=1" title="Edit section: Mutual exclusion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>As a simple example, consider a thread-safe object for performing transactions on a bank account:
</p>
<pre><b>monitor class</b> <i>Account</i> {
    <b>private</b> <i>int</i> balance&#160;:= 0
    <b>invariant</b> balance &gt;= 0

    <b>public method</b> <i>boolean</i> withdraw(<i>int</i> amount)
        <b>precondition</b> amount &gt;= 0
    {
        <b>if</b> balance &lt; amount {
            <b>return false</b>
        } <b>else</b> {
            balance&#160;:= balance - amount
            <b>return true</b>
        }
    }

    <b>public method</b> deposit(<i>int</i> amount)
        <b>precondition</b> amount &gt;= 0
    {
        balance&#160;:= balance + amount
    }
}
</pre>
<p>While a thread is executing a method of a thread-safe object, it is said to <i>occupy</i> the object, by holding its <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" title="Lock (computer science)">mutex (lock)</a>.  Thread-safe objects are implemented to enforce that <i>at each point in time, at most one thread may occupy the object</i>.  The lock, which is initially unlocked, is locked at the start of each public method, and is unlocked at each return from each public method.
</p><p>Upon calling one of the methods, a thread must wait until no other thread is executing any of the thread-safe object's methods before starting execution of its method.  Note that without this mutual exclusion, in the present example, two threads could cause money to be lost or gained for no reason. For example, two threads withdrawing 1000 from the account could both return true, while causing the balance to drop by only 1000, as follows: first, both threads fetch the current balance, find it greater than 1000, and subtract 1000 from it; then, both threads store the balance and return.
</p><p>The <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" title="Syntactic sugar">syntactic sugar</a> "monitor class" in the above example is implementing the following basic representation of the code, by wrapping each function's execution in mutexes:
</p>
<pre><b>class</b> <i>Account</i> {
    <b>private</b> <i>lock</i> myLock

    <b>private</b> <i>int</i> balance&#160;:= 0
    <b>invariant</b> balance &gt;= 0

    <b>public method</b> <i>boolean</i> withdraw(<i>int</i> amount)
       <b>precondition</b> amount &gt;= 0
    {
        myLock.acquire()
        <b>try</b> {
            <b>if</b> balance &lt; amount {
                <b>return false</b>
            } <b>else</b> {
                balance&#160;:= balance - amount
                <b>return true</b>
            }
        } <b>finally</b> {
            myLock.release()
        }
    }

    <b>public method</b> deposit(<i>int</i> amount)
       <b>precondition</b> amount &gt;= 0
    {
        myLock.acquire()
        <b>try</b> {
            balance&#160;:= balance + amount
        } <b>finally</b> {
            myLock.release()
        }
    }
}
</pre>
<h2><span class="mw-headline" id="Condition_variables">Condition variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=2" title="Edit section: Condition variables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Problem_statement">Problem statement</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=3" title="Edit section: Problem statement">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>For many applications, mutual exclusion is not enough. Threads attempting an operation may need to wait until some condition <var style="padding-right: 1px;">P</var> holds true. A <a href="https://en.wikipedia.org/wiki/Busy_waiting" title="Busy waiting">busy waiting</a> loop
</p>
<pre><b>while</b> <b>not</b>( <var style="padding-right: 1px;">P</var> ) <b>do</b> <b>skip</b>
</pre>
<p>will not work, as mutual exclusion will prevent any other thread from entering the monitor to make the condition true. Other "solutions" exist such as having a loop that unlocks the monitor, waits a certain amount of time, locks the monitor and checks for the condition <var style="padding-right: 1px;">P</var>. Theoretically, it works and will not deadlock, but issues arise. It's hard to decide an appropriate amount of waiting time, too small and the thread will hog the CPU, too big and it will be apparently unresponsive. What is needed is a way to signal the thread when the condition P is true (or <i>could</i> be true).
</p>
<h3><span id="Case_study:_classic_bounded_producer.2Fconsumer_problem"></span><span class="mw-headline" id="Case_study:_classic_bounded_producer/consumer_problem">Case study: classic bounded producer/consumer problem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=4" title="Edit section: Case study: classic bounded producer/consumer problem">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A classic concurrency problem is that of the <b>bounded producer/consumer</b>, in which there is a <a href="https://en.wikipedia.org/wiki/Queue_(data_structure)" class="mw-redirect" title="Queue (data structure)">queue</a> or <a href="https://en.wikipedia.org/wiki/Circular_buffer" title="Circular buffer">ring buffer</a> of tasks with a maximum size, with one or more threads being "producer" threads that add tasks to the queue, and one or more other threads being "consumer" threads that take tasks out of the queue.  The queue is assumed to be non–thread-safe itself, and it can be empty, full, or between empty and full.  Whenever the queue is full of tasks, then we need the producer threads to block until there is room from consumer threads dequeueing tasks.  On the other hand, whenever the queue is empty, then we need the consumer threads to block until more tasks are available due to producer threads adding them.
</p><p>As the queue is a concurrent object shared between threads, accesses to it must be made <a href="https://en.wikipedia.org/wiki/Atomicity_(database_systems)" title="Atomicity (database systems)">atomic</a>, because the queue can be put into an <b>inconsistent state</b> during the course of the queue access that should never be exposed between threads.  Thus, any code that accesses the queue constitutes a <b><a href="https://en.wikipedia.org/wiki/Critical_section" title="Critical section">critical section</a></b> that must be synchronized by mutual exclusion.  If code and processor instructions in critical sections of code that access the queue could be <b>interleaved</b> by arbitrary <b>context switches</b> between threads on the same processor or by simultaneously-running threads on multiple processors, then there is a risk of exposing inconsistent state and causing <a href="https://en.wikipedia.org/wiki/Race_condition" title="Race condition">race conditions</a>.
</p>
<h4><span class="mw-headline" id="Incorrect_without_synchronization">Incorrect without synchronization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=5" title="Edit section: Incorrect without synchronization">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>A naïve approach is to design the code with <b>busy-waiting</b> and no synchronization, making the code subject to race conditions:
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">global</span><span class="w"> </span><span class="n">RingBuffer</span><span class="w"> </span><span class="n">queue</span><span class="p">;</span><span class="w"> </span><span class="c1">// A thread-unsafe ring-buffer of tasks.</span>

<span class="c1">// Method representing each producer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">task</span><span class="w"> </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"> </span><span class="c1">// Producer makes some new task to be added.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isFull</span><span class="p">())</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">// Busy-wait until the queue is non-full.</span>
<span class="w">        </span><span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"> </span><span class="c1">// Add the task to the queue.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Method representing each consumer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">// Busy-wait until the queue is non-empty.</span>
<span class="w">        </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"> </span><span class="c1">// Take a task off of the queue.</span>
<span class="w">        </span><span class="n">doStuff</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"> </span><span class="c1">// Go off and do something with the task.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>This code has a serious problem in that accesses to the queue can be interrupted and interleaved with other threads' accesses to the queue.  The <i>queue.enqueue</i> and <i>queue.dequeue</i> methods likely have instructions to update the queue's member variables such as its size, beginning and ending positions, assignment and allocation of queue elements, etc.  In addition, the <i>queue.isEmpty()</i> and <i>queue.isFull()</i> methods read this shared state as well.  If producer/consumer threads are allowed to be interleaved during the calls to enqueue/dequeue, then inconsistent state of the queue can be exposed leading to race conditions.  In addition, if one consumer makes the queue empty in-between another consumer's exiting the busy-wait and calling "dequeue", then the second consumer will attempt to dequeue from an empty queue leading to an error.  Likewise, if a producer makes the queue full in-between another producer's exiting the busy-wait and calling "enqueue", then the second producer will attempt to add to a full queue leading to an error.
</p>
<h4><span class="mw-headline" id="Spin-waiting">Spin-waiting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=6" title="Edit section: Spin-waiting">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>One naive approach to achieve synchronization, as alluded to above, is to use "<b>spin-waiting</b>", in which a mutex is used to protect the critical sections of code and busy-waiting is still used, with the lock being acquired and released in between each busy-wait check.
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">global</span><span class="w"> </span><span class="n">RingBuffer</span><span class="w"> </span><span class="n">queue</span><span class="p">;</span><span class="w"> </span><span class="c1">// A thread-unsafe ring-buffer of tasks.</span>
<span class="n">global</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">queueLock</span><span class="p">;</span><span class="w"> </span><span class="c1">// A mutex for the ring-buffer of tasks.</span>

<span class="c1">// Method representing each producer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">task</span><span class="w"> </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"> </span><span class="c1">// Producer makes some new task to be added.</span>

<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Acquire lock for initial busy-wait check.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isFull</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Busy-wait until the queue is non-full.</span>
<span class="w">            </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Drop the lock temporarily to allow a chance for other threads</span>
<span class="w">            </span><span class="c1">// needing queueLock to run so that a consumer might take a task.</span>
<span class="w">            </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Re-acquire the lock for the next call to &quot;queue.isFull()&quot;.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"> </span><span class="c1">// Add the task to the queue.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"> </span><span class="c1">// Drop the queue lock until we need it again to add the next task.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Method representing each consumer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Acquire lock for initial busy-wait check.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Busy-wait until the queue is non-empty.</span>
<span class="w">            </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Drop the lock temporarily to allow a chance for other threads</span>
<span class="w">            </span><span class="c1">// needing queueLock to run so that a producer might add a task.</span>
<span class="w">            </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Re-acquire the lock for the next call to &quot;queue.isEmpty()&quot;.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"> </span><span class="c1">// Take a task off of the queue.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"> </span><span class="c1">// Drop the queue lock until we need it again to take off the next task.</span>
<span class="w">        </span><span class="n">doStuff</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"> </span><span class="c1">// Go off and do something with the task.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>This method assures that an inconsistent state does not occur, but wastes CPU resources due to the unnecessary busy-waiting.  Even if the queue is empty and producer threads have nothing to add for a long time, consumer threads are always busy-waiting unnecessarily.  Likewise, even if consumers are blocked for a long time on processing their current tasks and the queue is full, producers are always busy-waiting.  This is a wasteful mechanism.  What is needed is a way to make producer threads block until the queue is non-full, and a way to make consumer threads block until the queue is non-empty.
</p><p>(N.B.: Mutexes themselves can also be <b>spin-locks</b> which involve busy-waiting in order to get the lock, but in order to solve this problem of wasted CPU resources, we assume that <i>queueLock</i> is not a spin-lock and properly uses a blocking lock queue itself.)
</p>
<h3><span class="mw-headline" id="Condition_variables_2">Condition variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=7" title="Edit section: Condition variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The solution is to use <b>condition variables</b>. Conceptually a condition variable is a queue of threads, associated with a mutex, on which a thread may wait for some condition to become true. Thus each condition variable <span class="texhtml mvar" style="font-style:italic;">c</span> is associated with an <a href="https://en.wikipedia.org/wiki/Assertion_(computing)" class="mw-redirect" title="Assertion (computing)">assertion</a> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span>. While a thread is waiting on a condition variable, that thread is not considered to occupy the monitor, and so other threads may enter the monitor to change the monitor's state. In most types of monitors, these other threads may signal the condition variable <span class="texhtml mvar" style="font-style:italic;">c</span> to indicate that assertion <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is true in the current state.
</p><p>Thus there are three main operations on condition variables:
</p>
<ul><li><code><b>wait</b> c, m</code>, where <code><i>c</i></code> is a condition variable and <code>m</code> is a <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" title="Lock (computer science)">mutex (lock)</a> associated with the monitor.  This operation is called by a thread that needs to wait until the assertion <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is true before proceeding.  While the thread is waiting, it does not occupy the monitor.  The function, and fundamental contract, of the "wait" operation, is to do the following steps:
<ol><li><a href="https://en.wikipedia.org/wiki/Atomic_operation" class="mw-redirect" title="Atomic operation">Atomically</a>:
<dl><dd><div><ol style="list-style-type:lower-alpha"><li>release the mutex <code><i>m</i></code>,</li><li>move this thread from the "running" to <code><i>c</i></code>'s "wait-queue" (a.k.a. "sleep-queue") of threads, and</li><li>sleep this thread.  (Context is synchronously yielded to another thread.)</li></ol></div></dd></dl></li>
<li>Once this thread is subsequently notified/signaled (see below) and resumed, then automatically re-acquire the mutex <code><i>m</i></code>.</li></ol>
<dl><dd>Steps 1a and 1b can occur in either order, with 1c usually occurring after them.  While the thread is sleeping and in <code><i>c</i></code>'s wait-queue, the next <a href="https://en.wikipedia.org/wiki/Program_counter" title="Program counter">program counter</a> to be executed is at step 2, in the middle of the "wait" function/<a href="https://en.wikipedia.org/wiki/Subroutine" title="Subroutine">subroutine</a>.  Thus, the thread sleeps and later wakes up in the middle of the "wait" operation.</dd>
<dd>The atomicity of the operations within step 1 is important to avoid race conditions that would be caused by a preemptive thread switch in-between them.  One failure mode that could occur if these were not atomic is a <i>missed wakeup</i>, in which the thread could be on <code><i>c</i></code>'s sleep-queue and have released the mutex, but a preemptive thread switch occurred before the thread went to sleep, and another thread called a signal operation (see below) on <code><i>c</i></code> moving the first thread back out of <code><i>c</i></code>'s queue.  As soon as the first thread in question is switched back to, its program counter will be at step 1c, and it will sleep and be unable to be woken up again, violating the invariant that it should have been on <code><i>c</i></code>'s sleep-queue when it slept.  Other race conditions depend on the ordering of steps 1a and 1b, and depend on where a context switch occurs.</dd></dl></li>
<li><code><b>signal</b> c</code>, also known as <code><b>notify</b> c</code>, is called by a thread to indicate that the assertion <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is true.  Depending on the type and implementation of the monitor, this moves one or more threads from <code>c</code>'s sleep-queue to the "ready queue" or another queues for it to be executed.  It is usually considered a best practice to perform the "signal" operation before releasing mutex <code><i>m</i></code> that is associated with <code><i>c</i></code>, but as long as the code is properly designed for concurrency and depending on the threading implementation, it is often also acceptable to release the lock before signalling.  Depending on the threading implementation, the ordering of this can have scheduling-priority ramifications.  (Some authors<sup class="noprint Inline-Template" style="white-space:nowrap;">&#91;<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Manual_of_Style/Words_to_watch#Unsupported_attributions" title="Wikipedia:Manual of Style/Words to watch"><span title="The material near this tag possibly uses too-vague attribution or weasel words. (March 2019)">who?</span></a></i>&#93;</sup> instead advocate a preference for releasing the lock before signalling.)  A threading implementation should document any special constraints on this ordering.</li>
<li><code><b>broadcast</b> c</code>, also known as <code><b>notifyAll</b> c</code>, is a similar operation that wakes up all threads in c's wait-queue.  This empties the wait-queue.  Generally, when more than one predicate condition is associated with the same condition variable, the application will require <b>broadcast</b> instead of <b>signal</b> because a thread waiting for the wrong condition might be woken up and then immediately go back to sleep without waking up a thread waiting for the correct condition that just became true.  Otherwise, if the predicate condition is one-to-one with the condition variable associated with it, then <b>signal</b> may be more efficient than <b>broadcast</b>.</li></ul>
<p>As a design rule, multiple condition variables can be associated with the same mutex, but not vice versa.  (This is a <a href="https://en.wikipedia.org/wiki/Multivalued_function" title="Multivalued function">one-to-many</a> correspondence.)  This is because the predicate <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is the same for all threads using the monitor and must be protected with mutual exclusion from all other threads that might cause the condition to be changed or that might read it while the thread in question causes it to be changed, but there may be different threads that want to wait for a different condition on the same variable requiring the same mutex to be used.  In the producer-consumer example <a href="#Case_study:_classic_bounded_producer.2Fconsumer_problem">described above</a>, the queue must be protected by a unique mutex object, <code><i>m</i></code>.  The "producer" threads will want to wait on a monitor using lock <code><i>m</i></code> and a condition variable <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML"  alttext="{\displaystyle c_{full}}">
  <semantics>
    <mrow class="MJX-TeXAtom-ORD">
      <mstyle displaystyle="true" scriptlevel="0">
        <msub>
          <mi>c</mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mi>f</mi>
            <mi>u</mi>
            <mi>l</mi>
            <mi>l</mi>
          </mrow>
        </msub>
      </mstyle>
    </mrow>
    <annotation encoding="application/x-tex">{\displaystyle c_{full}}</annotation>
  </semantics>
</math></span><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/488f6823f7546dbbcf1ad23afad080383b2755ae" class="mwe-math-fallback-image-inline" aria-hidden="true" style="vertical-align: -1.005ex; width:4.064ex; height:2.343ex;" alt="c_{full}"/></span> which blocks until the queue is non-full.  The "consumer" threads will want to wait on a different monitor using the same mutex <code><i>m</i></code> but a different condition variable <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML"  alttext="{\displaystyle c_{empty}}">
  <semantics>
    <mrow class="MJX-TeXAtom-ORD">
      <mstyle displaystyle="true" scriptlevel="0">
        <msub>
          <mi>c</mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mi>e</mi>
            <mi>m</mi>
            <mi>p</mi>
            <mi>t</mi>
            <mi>y</mi>
          </mrow>
        </msub>
      </mstyle>
    </mrow>
    <annotation encoding="application/x-tex">{\displaystyle c_{empty}}</annotation>
  </semantics>
</math></span><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/44f1e4fdcb10e28125efce8d2a0bcf87759ca509" class="mwe-math-fallback-image-inline" aria-hidden="true" style="vertical-align: -1.005ex; width:5.686ex; height:2.343ex;" alt="c_{empty}"/></span> which blocks until the queue is non-empty.  It would (usually) never make sense to have different mutexes for the same condition variable, but this classic example shows why it often certainly makes sense to have multiple condition variables using the same mutex.  A mutex used by one or more condition variables (one or more monitors) may also be shared with code that does <i>not</i> use condition variables (and which simply acquires/releases it without any wait/signal operations), if those <a href="https://en.wikipedia.org/wiki/Critical_section" title="Critical section">critical sections</a> do not happen to require waiting for a certain condition on the concurrent data.
</p>
<h3><span class="mw-headline" id="Monitor_usage">Monitor usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=8" title="Edit section: Monitor usage">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The proper basic usage of a monitor is:
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">acquire</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="c1">// Acquire this monitor&#39;s lock.</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// While the condition/predicate/assertion that we are waiting for is not true...</span>
<span class="w">	</span><span class="n">wait</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="p">);</span><span class="w"> </span><span class="c1">// Wait on this monitor&#39;s lock and condition variable.</span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// ... Critical section of code goes here ...</span>
<span class="n">signal</span><span class="p">(</span><span class="n">cv2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Or: broadcast(cv2);</span>
<span class="w">             </span><span class="c1">// cv2 might be the same as cv or different.</span>
<span class="n">release</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="c1">// Release this monitor&#39;s lock.</span>
</pre></div>
<p>To be more precise, this is the same pseudocode but with more verbose comments to better explain what is going on:
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// ... (previous code)</span>
<span class="c1">// About to enter the monitor.</span>
<span class="c1">// Acquire the advisory mutex (lock) associated with the concurrent</span>
<span class="c1">// data that is shared between threads, </span>
<span class="c1">// to ensure that no two threads can be preemptively interleaved or</span>
<span class="c1">// run simultaneously on different cores while executing in critical</span>
<span class="c1">// sections that read or write this same concurrent data. If another</span>
<span class="c1">// thread is holding this mutex, then this thread will be put to sleep</span>
<span class="c1">// (blocked) and placed on m&#39;s sleep queue.  (Mutex &quot;m&quot; shall not be</span>
<span class="c1">// a spin-lock.)</span>
<span class="n">acquire</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w"></span>
<span class="c1">// Now, we are holding the lock and can check the condition for the</span>
<span class="c1">// first time.</span>

<span class="c1">// The first time we execute the while loop condition after the above</span>
<span class="c1">// &quot;acquire&quot;, we are asking, &quot;Does the condition/predicate/assertion</span>
<span class="c1">// we are waiting for happen to already be true?&quot;</span>

<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">())</span><span class="w"> 	</span><span class="c1">// &quot;p&quot; is any expression (e.g. variable or </span>
<span class="w">		</span><span class="c1">// function-call) that checks the condition and</span>
<span class="w">		</span><span class="c1">// evaluates to boolean.  This itself is a critical</span>
<span class="w">		</span><span class="c1">// section, so you *MUST* be holding the lock when</span>
<span class="w">		</span><span class="c1">// executing this &quot;while&quot; loop condition!</span>
<span class="w">				</span>
<span class="c1">// If this is not the first time the &quot;while&quot; condition is being checked,</span>
<span class="c1">// then we are asking the question, &quot;Now that another thread using this</span>
<span class="c1">// monitor has notified me and woken me up and I have been context-switched</span>
<span class="c1">// back to, did the condition/predicate/assertion we are waiting on stay</span>
<span class="c1">// true between the time that I was woken up and the time that I re-acquired</span>
<span class="c1">// the lock inside the &quot;wait&quot; call in the last iteration of this loop, or</span>
<span class="c1">// did some other thread cause the condition to become false again in the</span>
<span class="c1">// meantime thus making this a spurious wakeup?</span>

<span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="c1">// If this is the first iteration of the loop, then the answer is</span>
<span class="w">	</span><span class="c1">// &quot;no&quot; -- the condition is not ready yet. Otherwise, the answer is:</span>
<span class="w">	</span><span class="c1">// the latter.  This was a spurious wakeup, some other thread occurred</span>
<span class="w">	</span><span class="c1">// first and caused the condition to become false again, and we must</span>
<span class="w">	</span><span class="c1">// wait again.</span>

<span class="w">	</span><span class="n">wait</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="p">);</span><span class="w"></span>
<span class="w">		</span><span class="c1">// Temporarily prevent any other thread on any core from doing</span>
<span class="w">		</span><span class="c1">// operations on m or cv.</span>
<span class="w">		</span><span class="c1">// release(m) 		// Atomically release lock &quot;m&quot; so other</span>
<span class="w">		</span><span class="c1">//			// code using this concurrent data</span>
<span class="w">		</span><span class="c1">// 			// can operate, move this thread to cv&#39;s</span>
<span class="w">		</span><span class="c1">//			// wait-queue so that it will be notified</span>
<span class="w">		</span><span class="c1">//			// sometime when the condition becomes</span>
<span class="w">		</span><span class="c1">// 			// true, and sleep this thread. Re-enable</span>
<span class="w">		</span><span class="c1">//			// other threads and cores to do </span>
<span class="w">		</span><span class="c1">//			// operations on m and cv.</span>
<span class="w">		</span><span class="c1">//</span>
<span class="w">		</span><span class="c1">// Context switch occurs on this core.</span>
<span class="w">		</span><span class="c1">//</span>
<span class="w">		</span><span class="c1">// At some future time, the condition we are waiting for becomes</span>
<span class="w">		</span><span class="c1">// true, and another thread using this monitor (m, cv) does either</span>
<span class="w">		</span><span class="c1">// a signal that happens to wake this thread up, or a</span>
<span class="w">		</span><span class="c1">// broadcast that wakes us up, meaning that we have been taken out</span>
<span class="w">		</span><span class="c1">// of cv&#39;s wait-queue.</span>
<span class="w">		</span><span class="c1">//</span>
<span class="w">		</span><span class="c1">// During this time, other threads may cause the condition to</span>
<span class="w">		</span><span class="c1">// become false again, or the condition may toggle one or more</span>
<span class="w">		</span><span class="c1">// times, or it may happen to stay true.</span>
<span class="w">		</span><span class="c1">//</span>
<span class="w">		</span><span class="c1">// This thread is switched back to on some core.</span>
<span class="w">		</span><span class="c1">//</span>
<span class="w">		</span><span class="c1">// acquire(m)		// Lock &quot;m&quot; is re-acquired.</span>
<span class="w">		</span>
<span class="w">	</span><span class="c1">// End this loop iteration and re-check the &quot;while&quot; loop condition to make</span>
<span class="w">	</span><span class="c1">// sure the predicate is still true.</span>
<span class="w">	</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// The condition we are waiting for is true!</span>
<span class="c1">// We are still holding the lock, either from before entering the monitor or from</span>
<span class="c1">// the last execution of &quot;wait&quot;.</span>

<span class="c1">// Critical section of code goes here, which has a precondition that our predicate</span>
<span class="c1">// must be true.</span>
<span class="c1">// This code might make cv&#39;s condition false, and/or make other condition variables&#39;</span>
<span class="c1">// predicates true.</span>

<span class="c1">// Call signal or broadcast, depending on which condition variables&#39;</span>
<span class="c1">// predicates (who share mutex m) have been made true or may have been made true,</span>
<span class="c1">// and the monitor semantic type being used.</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">cv_x</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">cvs_to_signal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">signal</span><span class="p">(</span><span class="n">cv_x</span><span class="p">);</span><span class="w"> </span><span class="c1">// Or: broadcast(cv_x);</span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// One or more threads have been woken up but will block as soon as they try</span>
<span class="c1">// to acquire m.</span>

<span class="c1">// Release the mutex so that notified thread(s) and others can enter their critical</span>
<span class="c1">// sections.</span>
<span class="n">release</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w"></span>
</pre></div>
<h4><span id="Solving_the_bounded_producer.2Fconsumer_problem"></span><span class="mw-headline" id="Solving_the_bounded_producer/consumer_problem">Solving the bounded producer/consumer problem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=9" title="Edit section: Solving the bounded producer/consumer problem">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<table class="box-Technical plainlinks metadata ambox ambox-style ambox-technical" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><img alt="" src="http://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png" decoding="async" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/60px-Edit-clear.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/80px-Edit-clear.svg.png 2x" data-file-width="48" data-file-height="48" /></div></td><td class="mbox-text"><div class="mbox-text-span">This section <b>may be too technical for most readers to understand</b>.<span class="hide-when-compact"> Please <a class="external text" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit">help improve it</a> to <a href="https://en.wikipedia.org/wiki/Wikipedia:Make_technical_articles_understandable" title="Wikipedia:Make technical articles understandable">make it understandable to non-experts</a>, without removing the technical details.</span>  <span class="date-container"><i>(<span class="date">January 2014</span>)</i></span><span class="hide-when-compact"><i> (<small><a href="https://en.wikipedia.org/wiki/Help:Maintenance_template_removal" title="Help:Maintenance template removal">Learn how and when to remove this template message</a></small>)</i></span></div></td></tr></tbody></table>
<p>Having introduced the usage of condition variables, let's use it to revisit and solve the classic bounded producer/consumer problem.  The classic solution is to use two monitors, comprising two condition variables sharing one lock on the queue:
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">global</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">RingBuffer</span><span class="w"> </span><span class="n">queue</span><span class="p">;</span><span class="w"> </span><span class="c1">// A thread-unsafe ring-buffer of tasks.</span>
<span class="n">global</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">queueLock</span><span class="p">;</span><span class="w"> </span><span class="c1">// A mutex for the ring-buffer of tasks. (Not a spin-lock.)</span>
<span class="n">global</span><span class="w"> </span><span class="n">CV</span><span class="w"> </span><span class="n">queueEmptyCV</span><span class="p">;</span><span class="w"> </span><span class="c1">// A condition variable for consumer threads waiting for the queue to </span>
<span class="w">				        </span><span class="c1">// become non-empty. Its associated lock is &quot;queueLock&quot;.</span>
<span class="n">global</span><span class="w"> </span><span class="n">CV</span><span class="w"> </span><span class="n">queueFullCV</span><span class="p">;</span><span class="w"> </span><span class="c1">// A condition variable for producer threads waiting for the queue to</span>
<span class="w">				       </span><span class="c1">// become non-full. Its associated lock is also &quot;queueLock&quot;.</span>

<span class="c1">// Method representing each producer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Producer makes some new task to be added.</span>
<span class="w">        </span><span class="n">task</span><span class="w"> </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Acquire &quot;queueLock&quot; for the initial predicate check.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that checks if the queue is non-full.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isFull</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Release &quot;queueLock&quot;, enqueue this thread onto &quot;queueFullCV&quot; and sleep this thread.</span>
<span class="w">            </span><span class="n">wait</span><span class="p">(</span><span class="n">queueLock</span><span class="p">,</span><span class="w"> </span><span class="n">queueFullCV</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="c1">// When this thread is awoken, re-acquire &quot;queueLock&quot; for the next predicate check.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that adds the task to the queue (note that we are holding &quot;queueLock&quot;).</span>
<span class="w">        </span><span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Wake up one or all consumer threads that are waiting for the queue to be non-empty</span>
<span class="w">        </span><span class="c1">// now that it is guaranteed, so that a consumer thread will take the task.</span>
<span class="w">        </span><span class="n">signal</span><span class="p">(</span><span class="n">queueEmptyCV</span><span class="p">);</span><span class="w"> </span><span class="c1">// Or: broadcast(queueEmptyCV);</span>
<span class="w">        </span><span class="c1">// End of critical sections.</span>

<span class="w">        </span><span class="c1">// Release &quot;queueLock&quot; until we need it again to add the next task.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Method representing each consumer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Acquire &quot;queueLock&quot; for the initial predicate check.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that checks if the queue is non-empty.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Release &quot;queueLock&quot;, enqueue this thread onto &quot;queueEmptyCV&quot; and sleep this thread.</span>
<span class="w">            </span><span class="n">wait</span><span class="p">(</span><span class="n">queueLock</span><span class="p">,</span><span class="w"> </span><span class="n">queueEmptyCV</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="c1">// When this thread is awoken, re-acquire &quot;queueLock&quot; for the next predicate check.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that takes a task off of the queue (note that we are holding &quot;queueLock&quot;).</span>
<span class="w">        </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Wake up one or all producer threads that are waiting for the queue to be non-full</span>
<span class="w">        </span><span class="c1">// now that it is guaranteed, so that a producer thread will add a task.</span>
<span class="w">        </span><span class="n">signal</span><span class="p">(</span><span class="n">queueFullCV</span><span class="p">);</span><span class="w"> </span><span class="c1">// Or: broadcast(queueFullCV);</span>
<span class="w">        </span><span class="c1">// End of critical sections.</span>

<span class="w">        </span><span class="c1">// Release &quot;queueLock&quot; until we need it again to take the next task.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Go off and do something with the task.</span>
<span class="w">        </span><span class="n">doStuff</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>This ensures concurrency between the producer and consumer threads sharing the task queue, and blocks the threads that have nothing to do rather than busy-waiting as shown in the aforementioned approach using spin-locks.
</p><p>A variant of this solution could use a single condition variable for both producers and consumers, perhaps named "queueFullOrEmptyCV" or "queueSizeChangedCV".  In this case, more than one condition is associated with the condition variable, such that the condition variable represents a weaker condition than the conditions being checked by individual threads.  The condition variable represents threads that are waiting for the queue to be non-full <i>and</i> ones waiting for it to be non-empty.  However, doing this would require using <i>broadcast</i> in all the threads using the condition variable and cannot use a regular <i>signal</i>.  This is because the regular <i>signal</i> might wake up a thread of the wrong type whose condition has not yet been met, and that thread would go back to sleep without a thread of the correct type getting signaled.  For example, a producer might make the queue full and wake up another producer instead of a consumer, and the woken producer would go back to sleep.  In the complementary case, a consumer might make the queue empty and wake up another consumer instead of a producer, and the consumer would go back to sleep.  Using <i>broadcast</i> ensures that some thread of the right type will proceed as expected by the problem statement.
</p><p>Here is the variant using only one condition variable and broadcast:
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">global</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">RingBuffer</span><span class="w"> </span><span class="n">queue</span><span class="p">;</span><span class="w"> </span><span class="c1">// A thread-unsafe ring-buffer of tasks.</span>
<span class="n">global</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">queueLock</span><span class="p">;</span><span class="w"> </span><span class="c1">// A mutex for the ring-buffer of tasks.  (Not a spin-lock.)</span>
<span class="n">global</span><span class="w"> </span><span class="n">CV</span><span class="w"> </span><span class="n">queueFullOrEmptyCV</span><span class="p">;</span><span class="w"> </span><span class="c1">// A single condition variable for when the queue is not ready for any thread</span>
<span class="w">                              </span><span class="c1">// i.e. for producer threads waiting for the queue to become non-full </span>
<span class="w">                              </span><span class="c1">// and consumer threads waiting for the queue to become non-empty.</span>
<span class="w">                              </span><span class="c1">// Its associated lock is &quot;queueLock&quot;.</span>
<span class="w">                              </span><span class="c1">// Not safe to use regular &quot;signal&quot; because it is associated with</span>
<span class="w">                              </span><span class="c1">// multiple predicate conditions (assertions).</span>

<span class="c1">// Method representing each producer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Producer makes some new task to be added.</span>
<span class="w">        </span><span class="n">task</span><span class="w"> </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Acquire &quot;queueLock&quot; for the initial predicate check.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that checks if the queue is non-full.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isFull</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Release &quot;queueLock&quot;, enqueue this thread onto &quot;queueFullOrEmptyCV&quot; and sleep this thread.</span>
<span class="w">            </span><span class="n">wait</span><span class="p">(</span><span class="n">queueLock</span><span class="p">,</span><span class="w"> </span><span class="n">queueFullOrEmptyCV</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="c1">// When this thread is awoken, re-acquire &quot;queueLock&quot; for the next predicate check.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that adds the task to the queue (note that we are holding &quot;queueLock&quot;).</span>
<span class="w">        </span><span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Wake up all producer and consumer threads that are waiting for the queue to be respectively</span>
<span class="w">        </span><span class="c1">// non-full and non-empty now that the latter is guaranteed, so that a consumer thread will take the task.</span>
<span class="w">        </span><span class="n">broadcast</span><span class="p">(</span><span class="n">queueFullOrEmptyCV</span><span class="p">);</span><span class="w"> </span><span class="c1">// Do not use &quot;signal&quot; (as it might wake up another producer thread only).</span>
<span class="w">        </span><span class="c1">// End of critical sections.</span>

<span class="w">        </span><span class="c1">// Release &quot;queueLock&quot; until we need it again to add the next task.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Method representing each consumer thread&#39;s behavior:</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Acquire &quot;queueLock&quot; for the initial predicate check.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that checks if the queue is non-empty.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Release &quot;queueLock&quot;, enqueue this thread onto &quot;queueFullOrEmptyCV&quot; and sleep this thread.</span>
<span class="w">            </span><span class="n">wait</span><span class="p">(</span><span class="n">queueLock</span><span class="p">,</span><span class="w"> </span><span class="n">queueFullOrEmptyCV</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="c1">// When this thread is awoken, re-acquire &quot;queueLock&quot; for the next predicate check.</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Critical section that takes a task off of the queue (note that we are holding &quot;queueLock&quot;).</span>
<span class="w">        </span><span class="n">myTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Wake up all producer and consumer threads that are waiting for the queue to be respectively</span>
<span class="w">        </span><span class="c1">// non-full and non-empty now that the former is guaranteed, so that a producer thread will add a task.</span>
<span class="w">        </span><span class="n">broadcast</span><span class="p">(</span><span class="n">queueFullOrEmptyCV</span><span class="p">);</span><span class="w"> </span><span class="c1">// Do not use &quot;signal&quot; (as it might wake up another consumer thread only).</span>
<span class="w">        </span><span class="c1">// End of critical sections.</span>

<span class="w">        </span><span class="c1">// Release &quot;queueLock&quot; until we need it again to take the next task.</span>
<span class="w">        </span><span class="n">queueLock</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Go off and do something with the task.</span>
<span class="w">        </span><span class="n">doStuff</span><span class="p">(</span><span class="n">myTask</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Synchronization_primitives">Synchronization primitives</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=10" title="Edit section: Synchronization primitives">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Implementing mutexes and condition variables requires some kind of synchronization primitive provided by hardware support that provides <a href="https://en.wikipedia.org/wiki/Atomic_operation" class="mw-redirect" title="Atomic operation">atomicity</a>.  Locks and condition variables are higher-level abstractions over these synchronization primitives.  On a uniprocessor, disabling and enabling interrupts is a way to implement monitors by preventing context switches during the critical sections of the locks and condition variables, but this is not enough on a multiprocessor.  On a multiprocessor, usually special atomic <b>read-modify-write</b> instructions on the memory such as <b>test-and-set</b>, <b><a href="https://en.wikipedia.org/wiki/Compare-and-swap" title="Compare-and-swap">compare-and-swap</a></b>, etc. are used, depending on what the <a href="https://en.wikipedia.org/wiki/Instruction_set_architecture" title="Instruction set architecture">instruction set architecture</a> provides.  These usually require deferring to spin-locking for the internal lock state itself, but this locking is very brief.  Depending on the implementation, the atomic read-modify-write instructions may lock the bus from other cores' accesses and/or prevent re-ordering of instructions in the CPU.  Here is an example pseudocode implementation of parts of a threading system and mutexes and Mesa-style condition variables, using <b>test-and-set</b> and a first-come, first-served policy.  This glosses over most of how a threading system works, but shows the parts relevant to mutexes and condition variables:
</p>
<h4><span class="mw-headline" id="Sample_Mesa-monitor_implementation_with_Test-and-Set">Sample Mesa-monitor implementation with Test-and-Set</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=11" title="Edit section: Sample Mesa-monitor implementation with Test-and-Set">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<table class="box-Technical plainlinks metadata ambox ambox-style ambox-technical" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><img alt="" src="http://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png" decoding="async" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/60px-Edit-clear.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/80px-Edit-clear.svg.png 2x" data-file-width="48" data-file-height="48" /></div></td><td class="mbox-text"><div class="mbox-text-span">This section <b>may be too technical for most readers to understand</b>.<span class="hide-when-compact"> Please <a class="external text" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit">help improve it</a> to <a href="https://en.wikipedia.org/wiki/Wikipedia:Make_technical_articles_understandable" title="Wikipedia:Make technical articles understandable">make it understandable to non-experts</a>, without removing the technical details.</span>  <span class="date-container"><i>(<span class="date">January 2014</span>)</i></span><span class="hide-when-compact"><i> (<small><a href="https://en.wikipedia.org/wiki/Help:Maintenance_template_removal" title="Help:Maintenance template removal">Learn how and when to remove this template message</a></small>)</i></span></div></td></tr></tbody></table>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// Basic parts of threading system:</span>
<span class="c1">// Assume &quot;ThreadQueue&quot; supports random access.</span>
<span class="k">public</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">ThreadQueue</span><span class="w"> </span><span class="n">readyQueue</span><span class="p">;</span><span class="w"> </span><span class="c1">// Thread-unsafe queue of ready threads.  Elements are (Thread*).</span>
<span class="k">public</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">Thread</span><span class="o">*</span><span class="w"> </span><span class="n">currentThread</span><span class="p">;</span><span class="w"> </span><span class="c1">// Assume this variable is per-core.  (Others are shared.)</span>

<span class="c1">// Implements a spin-lock on just the synchronized state of the threading system itself.</span>
<span class="c1">// This is used with test-and-set as the synchronization primitive.</span>
<span class="k">public</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Context-switch interrupt service routine (ISR):</span>
<span class="c1">// On the current CPU core, preemptively switch to another thread.</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">contextSwitchISR</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// Can&#39;t switch context right now.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Ensure this interrupt can&#39;t happen again which would foul up the context switch:</span>
<span class="w">    </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Get all of the registers of the currently-running process.</span>
<span class="w">    </span><span class="c1">// For Program Counter (PC), we will need the instruction location of</span>
<span class="w">    </span><span class="c1">// the &quot;resume&quot; label below.  Getting the register values is platform-dependent and may involve</span>
<span class="w">    </span><span class="c1">// reading the current stack frame, JMP/CALL instructions, etc.  (The details are beyond this scope.)</span>
<span class="w">    </span><span class="n">currentThread</span><span class="o">-&gt;</span><span class="n">registers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getAllRegisters</span><span class="p">();</span><span class="w"> </span><span class="c1">// Store the registers in the &quot;currentThread&quot; object in memory.</span>
<span class="w">    </span><span class="n">currentThread</span><span class="o">-&gt;</span><span class="n">registers</span><span class="p">.</span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resume</span><span class="p">;</span><span class="w"> </span><span class="c1">// Set the next PC to the &quot;resume&quot; label below in this method.</span>

<span class="w">    </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"> </span><span class="c1">// Put this thread back onto the ready queue for later execution.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">Thread</span><span class="o">*</span><span class="w"> </span><span class="n">otherThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"> </span><span class="c1">// Remove and get the next thread to run from the ready queue.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">currentThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">otherThread</span><span class="p">;</span><span class="w"> </span><span class="c1">// Replace the global current-thread pointer value so it is ready for the next thread.</span>

<span class="w">    </span><span class="c1">// Restore the registers from currentThread/otherThread, including a jump to the stored PC of the other thread</span>
<span class="w">    </span><span class="c1">// (at &quot;resume&quot; below).  Again, the details of how this is done are beyond this scope.</span>
<span class="w">    </span><span class="n">restoreRegisters</span><span class="p">(</span><span class="n">otherThread</span><span class="p">.</span><span class="n">registers</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// *** Now running &quot;otherThread&quot; (which is now &quot;currentThread&quot;)!  The original thread is now &quot;sleeping&quot;. ***</span>

<span class="w">    </span><span class="nl">resume</span><span class="p">:</span><span class="w"> </span><span class="c1">// This is where another contextSwitch() call needs to set PC to when switching context back here.</span>

<span class="w">    </span><span class="c1">// Return to where otherThread left off.</span>

<span class="w">    </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">    </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Thread sleep method:</span>
<span class="c1">// On current CPU core, a synchronous context switch to another thread without putting</span>
<span class="c1">// the current thread on the ready queue.</span>
<span class="c1">// Must be holding &quot;threadingSystemBusy&quot; and disabled interrupts so that this method</span>
<span class="c1">// doesn&#39;t get interrupted by the thread-switching timer which would call contextSwitchISR().</span>
<span class="c1">// After returning from this method, must clear &quot;threadingSystemBusy&quot;.</span>
<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">threadSleep</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Get all of the registers of the currently-running process.</span>
<span class="w">    </span><span class="c1">// For Program Counter (PC), we will need the instruction location of</span>
<span class="w">    </span><span class="c1">// the &quot;resume&quot; label below.  Getting the register values is platform-dependent and may involve</span>
<span class="w">    </span><span class="c1">// reading the current stack frame, JMP/CALL instructions, etc.  (The details are beyond this scope.)</span>
<span class="w">    </span><span class="n">currentThread</span><span class="o">-&gt;</span><span class="n">registers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getAllRegisters</span><span class="p">();</span><span class="w"> </span><span class="c1">// Store the registers in the &quot;currentThread&quot; object in memory.</span>
<span class="w">    </span><span class="n">currentThread</span><span class="o">-&gt;</span><span class="n">registers</span><span class="p">.</span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resume</span><span class="p">;</span><span class="w"> </span><span class="c1">// Set the next PC to the &quot;resume&quot; label below in this method.</span>

<span class="w">    </span><span class="c1">// Unlike contextSwitchISR(), we will not place currentThread back into readyQueue.</span>
<span class="w">    </span><span class="c1">// Instead, it has already been placed onto a mutex&#39;s or condition variable&#39;s queue.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">Thread</span><span class="o">*</span><span class="w"> </span><span class="n">otherThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"> </span><span class="c1">// Remove and get the next thread to run from the ready queue.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">currentThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">otherThread</span><span class="p">;</span><span class="w"> </span><span class="c1">// Replace the global current-thread pointer value so it is ready for the next thread.</span>

<span class="w">    </span><span class="c1">// Restore the registers from currentThread/otherThread, including a jump to the stored PC of the other thread</span>
<span class="w">    </span><span class="c1">// (at &quot;resume&quot; below).  Again, the details of how this is done are beyond this scope.</span>
<span class="w">    </span><span class="n">restoreRegisters</span><span class="p">(</span><span class="n">otherThread</span><span class="p">.</span><span class="n">registers</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// *** Now running &quot;otherThread&quot; (which is now &quot;currentThread&quot;)!  The original thread is now &quot;sleeping&quot;. ***</span>

<span class="w">    </span><span class="nl">resume</span><span class="p">:</span><span class="w"> </span><span class="c1">// This is where another contextSwitch() call needs to set PC to when switching context back here.</span>

<span class="w">    </span><span class="c1">// Return to where otherThread left off.</span>
<span class="p">}</span><span class="w"></span>

<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="n">Mutex</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Internal spin-lock while other threads on any core are accessing this object&#39;s</span>
<span class="w">    </span><span class="c1">// &quot;held&quot; and &quot;threadQueue&quot;, or &quot;readyQueue&quot;.</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// N.B.: &quot;threadingSystemBusy&quot; is now true.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// System call to disable interrupts on this core so that threadSleep() doesn&#39;t get interrupted by</span>
<span class="w">    </span><span class="c1">// the thread-switching timer on this core which would call contextSwitchISR().</span>
<span class="w">    </span><span class="c1">// Done outside threadSleep() for more efficiency so that this thread will be sleeped</span>
<span class="w">    </span><span class="c1">// right after going on the condition-variable queue.</span>
<span class="w">    </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>
<span class="w"> </span>
<span class="w">    </span><span class="n">assert</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">held</span><span class="p">;</span><span class="w"> </span><span class="c1">// (Specifically, this thread must be the one holding it.)</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">waitingThreads</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">threadSleep</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Thread sleeps ... Thread gets woken up from a signal/broadcast.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">    </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Mesa style:</span>
<span class="w">    </span><span class="c1">// Context switches may now occur here, making the client caller&#39;s predicate false.</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">signal</span><span class="p">(</span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Internal spin-lock while other threads on any core are accessing this object&#39;s</span>
<span class="w">    </span><span class="c1">// &quot;held&quot; and &quot;threadQueue&quot;, or &quot;readyQueue&quot;.</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// N.B.: &quot;threadingSystemBusy&quot; is now true.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// System call to disable interrupts on this core so that threadSleep() doesn&#39;t get interrupted by</span>
<span class="w">    </span><span class="c1">// the thread-switching timer on this core which would call contextSwitchISR().</span>
<span class="w">    </span><span class="c1">// Done outside threadSleep() for more efficiency so that this thread will be sleeped</span>
<span class="w">    </span><span class="c1">// right after going on the condition-variable queue.</span>
<span class="w">    </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">c</span><span class="p">.</span><span class="n">waitingThreads</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">wokenThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">waitingThreads</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">wokenThread</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">    </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Mesa style:</span>
<span class="w">    </span><span class="c1">// The woken thread is not given any priority.</span>
<span class="p">}</span><span class="w"></span>

<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Internal spin-lock while other threads on any core are accessing this object&#39;s</span>
<span class="w">    </span><span class="c1">// &quot;held&quot; and &quot;threadQueue&quot;, or &quot;readyQueue&quot;.</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// N.B.: &quot;threadingSystemBusy&quot; is now true.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// System call to disable interrupts on this core so that threadSleep() doesn&#39;t get interrupted by</span>
<span class="w">    </span><span class="c1">// the thread-switching timer on this core which would call contextSwitchISR().</span>
<span class="w">    </span><span class="c1">// Done outside threadSleep() for more efficiency so that this thread will be sleeped</span>
<span class="w">    </span><span class="c1">// right after going on the condition-variable queue.</span>
<span class="w">    </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">c</span><span class="p">.</span><span class="n">waitingThreads</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">wokenThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">waitingThreads</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">wokenThread</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">    </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Mesa style:</span>
<span class="w">    </span><span class="c1">// The woken threads are not given any priority.</span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span> <span class="nc">Mutex</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="n">ThreadQueue</span><span class="w"> </span><span class="n">blockingThreads</span><span class="p">;</span><span class="w"> </span><span class="c1">// Thread-unsafe queue of blocked threads.  Elements are (Thread*).</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">acquire</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Internal spin-lock while other threads on any core are accessing this object&#39;s</span>
<span class="w">        </span><span class="c1">// &quot;held&quot; and &quot;threadQueue&quot;, or &quot;readyQueue&quot;.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="c1">// N.B.: &quot;threadingSystemBusy&quot; is now true.</span>
<span class="w">        </span>
<span class="w">        </span><span class="c1">// System call to disable interrupts on this core so that threadSleep() doesn&#39;t get interrupted by</span>
<span class="w">        </span><span class="c1">// the thread-switching timer on this core which would call contextSwitchISR().</span>
<span class="w">        </span><span class="c1">// Done outside threadSleep() for more efficiency so that this thread will be sleeped</span>
<span class="w">        </span><span class="c1">// right after going on the lock queue.</span>
<span class="w">        </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="o">!</span><span class="n">blockingThreads</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">held</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Put &quot;currentThread&quot; on this lock&#39;s queue so that it will be</span>
<span class="w">            </span><span class="c1">// considered &quot;sleeping&quot; on this lock.</span>
<span class="w">            </span><span class="c1">// Note that &quot;currentThread&quot; still needs to be handled by threadSleep().</span>
<span class="w">            </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">blockingThreads</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">threadSleep</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span>
<span class="w">            </span><span class="c1">// Now we are woken up, which must be because &quot;held&quot; became false.</span>
<span class="w">            </span><span class="n">assert</span><span class="w"> </span><span class="o">!</span><span class="n">held</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">assert</span><span class="w"> </span><span class="o">!</span><span class="n">blockingThreads</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">currentThread</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span>
<span class="w">        </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>
<span class="w">        </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">        </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="w">    </span><span class="p">}</span><span class="w">        </span>
<span class="w">        </span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">release</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Internal spin-lock while other threads on any core are accessing this object&#39;s</span>
<span class="w">        </span><span class="c1">// &quot;held&quot; and &quot;threadQueue&quot;, or &quot;readyQueue&quot;.</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">testAndSet</span><span class="p">(</span><span class="n">threadingSystemBusy</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="c1">// N.B.: &quot;threadingSystemBusy&quot; is now true.</span>
<span class="w">        </span>
<span class="w">        </span><span class="c1">// System call to disable interrupts on this core for efficiency.</span>
<span class="w">        </span><span class="n">systemCall_disableInterrupts</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span>
<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="n">held</span><span class="p">;</span><span class="w"> </span><span class="c1">// (Release should only be performed while the lock is held.)</span>

<span class="w">        </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">blockingThreads</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Thread</span><span class="o">*</span><span class="w"> </span><span class="n">unblockedThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blockingThreads</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">readyQueue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">unblockedThread</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span>
<span class="w">        </span><span class="n">threadingSystemBusy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// Must be an atomic assignment.</span>
<span class="w">        </span><span class="n">systemCall_enableInterrupts</span><span class="p">();</span><span class="w"> </span><span class="c1">// Turn pre-emptive switching back on on this core.</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">ConditionVariable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">volatile</span><span class="w"> </span><span class="n">ThreadQueue</span><span class="w"> </span><span class="n">waitingThreads</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Semaphore">Semaphore</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=12" title="Edit section: Semaphore">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>As an example, consider a thread-safe class that implements a <a href="https://en.wikipedia.org/wiki/Semaphore_(programming)" title="Semaphore (programming)">semaphore</a>.
There are methods to increment (V) and to decrement (P) a private integer <code>s</code>.
However, the integer must never be decremented below 0; thus a thread that tries to decrement must wait until the integer is positive.
We use a condition variable <code>sIsPositive</code> with an associated assertion of
<span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML"  alttext="{\displaystyle P_{\mathtt {sIsPositive}}=(s&gt;0)}">
  <semantics>
    <mrow class="MJX-TeXAtom-ORD">
      <mstyle displaystyle="true" scriptlevel="0">
        <msub>
          <mi>P</mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mrow class="MJX-TeXAtom-ORD">
              <mi mathvariant="monospace">s</mi>
              <mi mathvariant="monospace">I</mi>
              <mi mathvariant="monospace">s</mi>
              <mi mathvariant="monospace">P</mi>
              <mi mathvariant="monospace">o</mi>
              <mi mathvariant="monospace">s</mi>
              <mi mathvariant="monospace">i</mi>
              <mi mathvariant="monospace">t</mi>
              <mi mathvariant="monospace">i</mi>
              <mi mathvariant="monospace">v</mi>
              <mi mathvariant="monospace">e</mi>
            </mrow>
          </mrow>
        </msub>
        <mo>=</mo>
        <mo stretchy="false">(</mo>
        <mi>s</mi>
        <mo>&gt;</mo>
        <mn>0</mn>
        <mo stretchy="false">)</mo>
      </mstyle>
    </mrow>
    <annotation encoding="application/x-tex">{\displaystyle P_{\mathtt {sIsPositive}}=(s&gt;0)}</annotation>
  </semantics>
</math></span><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/daf53994779739cf839d49477bca6020211e4006" class="mwe-math-fallback-image-inline" aria-hidden="true" style="vertical-align: -0.838ex; width:21.477ex; height:2.843ex;" alt="{\displaystyle P_{\mathtt {sIsPositive}}=(s&gt;0)}"/></span>.
</p>
<pre><b>monitor class</b> <i>Semaphore</i>
{
    <b>private</b> <i>int</i> s&#160;:= 0
    <b>invariant</b> s &gt;= 0
    <b>private</b> <i>Condition</i> sIsPositive <u>/* <b>associated with</b> s &gt; 0 */</u>

    <b>public method</b> P()
    {
        <b>while</b> s = 0:
            <b>wait</b> sIsPositive
        <b>assert</b> s &gt; 0
        s&#160;:= s - 1
    }

    <b>public method</b> V()
    {
        s&#160;:= s + 1
        <b>assert</b> s &gt; 0
        <b>signal</b> sIsPositive
    }
}
</pre>
<p>Implemented showing all synchronization (removing the assumption of a thread-safe class and showing the mutex):
</p>
<pre><b>class</b> <i>Semaphore</i>
{
    <b>private</b> <b>volatile</b> <i>int</i> s&#160;:= 0
    <b>invariant</b> s &gt;= 0
    <b>private</b> <i>ConditionVariable</i> sIsPositive <u>/* <b>associated with</b> s &gt; 0 */</u>
    <b>private</b> <i>Mutex</i> myLock <u>/* Lock on "s" */</u>

    <b>public method</b> P()
    {
        myLock.acquire()
        <b>while</b> s = 0:
            <b>wait</b>(myLock, sIsPositive)
        <b>assert</b> s &gt; 0
        s&#160;:= s - 1
        myLock.release()
    }

    <b>public method</b> V()
    {
        myLock.acquire()
        s&#160;:= s + 1
        <b>assert</b> s &gt; 0
        <b>signal</b> sIsPositive
        myLock.release()
    }
}
</pre>
<h4><span class="mw-headline" id="Monitor_implemented_using_semaphores">Monitor implemented using semaphores</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=13" title="Edit section: Monitor implemented using semaphores">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Conversely, locks and condition variables can also be derived from semaphores, thus making monitors and semaphores reducible to one another:
</p><p>The implementation given here is incorrect. If a thread calls wait() after broadcast() has been called, an originally thread may be stuck indefinitely, since broadcast() increments the semaphore only enough times for threads already waiting.
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="n">Mutex</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">assert</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">held</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">numWaiters</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"> </span><span class="c1">// Can go before/after the neighboring lines.</span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Another thread could signal here, but that&#39;s OK because of how</span>
<span class="w">    </span><span class="c1">// semaphores count.  If c.sem&#39;s number becomes 1, we&#39;ll have no</span>
<span class="w">    </span><span class="c1">// waiting time.</span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">sem</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Block on the CV.</span>
<span class="w">    </span><span class="c1">// Woken</span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"> </span><span class="c1">// Re-acquire the mutex.</span>
<span class="p">}</span><span class="w"></span>

<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">signal</span><span class="p">(</span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">numWaiters</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">numWaiters</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">sem</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"> </span><span class="c1">// (Doesn&#39;t need to be protected by c.internalMutex.)</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="n">ConditionVariable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">numWaiters</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">numWaiters</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">sem</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"> </span><span class="c1">// (Doesn&#39;t need to be protected by c.internalMutex.)</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="p">.</span><span class="n">internalMutex</span><span class="p">.</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span> <span class="nc">Mutex</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// For assertions only, to make sure sem&#39;s number never goes &gt; 1.</span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="n">Semaphore</span><span class="w"> </span><span class="n">sem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// The number shall always be at most 1.</span>
<span class="w">                                          </span><span class="c1">// Not held &lt;--&gt; 1; held &lt;--&gt; 0.</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">acquire</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">sem</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="o">!</span><span class="n">held</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="nf">release</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="n">held</span><span class="p">;</span><span class="w"> </span><span class="c1">// Make sure we never acquire sem above 1.  That would be bad.</span>
<span class="w">        </span><span class="n">held</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">sem</span><span class="p">.</span><span class="n">acquire</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span> <span class="nc">ConditionVariable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">numWaiters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Roughly tracks the number of waiters blocked in sem.</span>
<span class="w">                                </span><span class="c1">// (The semaphore&#39;s internal state is necessarily private.)</span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="n">Semaphore</span><span class="w"> </span><span class="n">sem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Provides the wait queue.</span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="n">Mutex</span><span class="w"> </span><span class="n">internalMutex</span><span class="p">;</span><span class="w"> </span><span class="c1">// (Really another Semaphore.  Protects &quot;numWaiters&quot;.)</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>When a <b>signal</b> happens on a condition variable that at least one other thread is waiting on,
there are at least two threads that could then occupy the monitor:
the thread that signals and any one of the threads that is waiting. In order that at most
one thread occupies the monitor at each time, a choice must be made. Two schools of thought exist on how best to
resolve this choice. This leads to two kinds of condition variables which will be examined next:
</p>
<ul><li><i>Blocking condition variables</i> give priority to a signaled thread.</li>
<li><i>Nonblocking condition variables</i> give priority to the signaling thread.</li></ul>
<h3><span class="mw-headline" id="Blocking_condition_variables">Blocking condition variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=14" title="Edit section: Blocking condition variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The original proposals by <a href="https://en.wikipedia.org/wiki/C._A._R._Hoare" class="mw-redirect" title="C. A. R. Hoare">C. A. R. Hoare</a> and <a href="https://en.wikipedia.org/wiki/Per_Brinch_Hansen" title="Per Brinch Hansen">Per Brinch Hansen</a> were for <i>blocking condition variables</i>. With a blocking condition variable, the signaling thread must wait outside the monitor (at least) until the signaled thread relinquishes occupancy of the monitor by either returning or by again waiting on a condition variable. Monitors using blocking condition variables are often called <i>Hoare-style</i> monitors or <i>signal-and-urgent-wait</i> monitors.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-SU.png" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Monitor_(synchronization)-SU.png/200px-Monitor_(synchronization)-SU.png" decoding="async" width="200" height="212" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/d/db/Monitor_%28synchronization%29-SU.png/300px-Monitor_%28synchronization%29-SU.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/d/db/Monitor_%28synchronization%29-SU.png/400px-Monitor_%28synchronization%29-SU.png 2x" data-file-width="862" data-file-height="914" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-SU.png" class="internal" title="Enlarge"></a></div>A Hoare style monitor with two condition variables <code>a</code> and <code>b</code>. After Buhr <i>et al.</i></div></div></div>
<p>We assume there are two queues of threads associated with each monitor object
</p>
<ul><li><code>e</code> is the entrance queue</li>
<li><code>s</code> is a queue of threads that have signaled.</li></ul>
<p>In addition we assume that for each condition variable <span class="texhtml mvar" style="font-style:italic;">c</span>, there is a queue
</p>
<ul><li><code><span class="texhtml mvar" style="font-style:italic;">c</span>.q</code>, which is a queue for threads waiting on condition variable <span class="texhtml mvar" style="font-style:italic;">c</span></li></ul>
<p>All queues are typically guaranteed to be <a href="https://en.wikipedia.org/wiki/Unbounded_nondeterminism#Fairness" title="Unbounded nondeterminism">fair</a> and, in some implementations, may be guaranteed to be <a href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)" title="FIFO (computing and electronics)">first in first out</a>.
</p><p>The implementation of each operation is as follows. (We assume that each operation runs in mutual exclusion to the others; thus restarted threads do not begin executing until the operation is complete.)
</p>
<pre>enter the monitor:
    enter the method
    <b>if</b> the monitor is locked
        add this thread to e
        block this thread
    <b>else</b>
        lock the monitor

leave the monitor:
    schedule
    <b>return</b> from the method

<b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    add this thread to <span class="texhtml mvar" style="font-style:italic;">c</span>.q
    schedule
    block this thread

<b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    <b>if</b> there is a thread waiting on <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        select and remove one such thread t from <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        (t is called "the signaled thread")
        add this thread to s
        restart t
        (so t will occupy the monitor next)
        block this thread

schedule:
    <b>if</b> there is a thread on s
        select and remove one thread from s and restart it
        (this thread will occupy the monitor next)
    <b>else if</b> there is a thread on e
        select and remove one thread from e and restart it
        (this thread will occupy the monitor next)
    <b>else</b>
        unlock the monitor
        (the monitor will become unoccupied)
</pre>
<p>The <code>schedule</code> routine selects the next thread to occupy the monitor
or, in the absence of any candidate threads, unlocks the monitor.
</p><p>The resulting signaling discipline is known as <i>"signal and urgent wait,"</i> as the signaler must wait, but is given priority over threads on the entrance queue. An alternative is <i>"signal and wait,"</i> in which there is no <code>s</code> queue and signaler waits on the <code>e</code> queue instead.
</p><p>Some implementations provide a <b>signal and return</b> operation that combines signaling with returning from a procedure.
</p>
<pre><b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span> <b>and return</b>:
    <b>if</b> there is a thread waiting on <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        select and remove one such thread t from <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        (t is called "the signaled thread")
        restart t
        (so t will occupy the monitor next)
    <b>else</b>
        schedule
    <b>return</b> from the method
</pre>
<p>In either case ("signal and urgent wait" or "signal and wait"), when a condition variable is signaled and there is at least one thread waiting on the condition variable, the signaling thread hands occupancy over to the signaled thread seamlessly, so that no other thread can gain occupancy in between. If <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is true at the start of each <b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span> operation, it will be true at the end of each <b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span> operation. This is summarized by the following <a href="https://en.wikipedia.org/wiki/Design_by_contract" title="Design by contract">contracts</a>. In these contracts, <span class="texhtml mvar" style="font-style:italic;">I</span> is the monitor's <a href="https://en.wikipedia.org/wiki/Invariant_(computer_science)" class="mw-redirect" title="Invariant (computer science)">invariant</a>.
</p>
<pre>enter the monitor:
    <b>postcondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>

leave the monitor:
    <b>precondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>

<b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    <b>precondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>
    <b>modifies</b> the state of the monitor
    <b>postcondition</b> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> <b>and</b> <span class="texhtml mvar" style="font-style:italic;">I</span>

<b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    <b>precondition</b> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> <b>and</b> <span class="texhtml mvar" style="font-style:italic;">I</span>
    <b>modifies</b> the state of the monitor
    <b>postcondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>

<b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span> <b>and return</b>:
    <b>precondition</b> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> <b>and</b> <span class="texhtml mvar" style="font-style:italic;">I</span>
</pre>
<p>In these contracts, it is assumed that <span class="texhtml mvar" style="font-style:italic;">I</span> and <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> do not depend on the
contents or lengths of any queues.
</p><p>(When the condition variable can be queried as to the number of threads waiting on its queue, more sophisticated contracts can be given. For example, a useful pair of contracts, allowing occupancy to be passed without establishing the invariant, is:
</p>
<pre><b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    <b>precondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>
    <b>modifies</b> the state of the monitor
    <b>postcondition</b> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span>

<b>signal</b> <span class="texhtml mvar" style="font-style:italic;">c</span>
    <b>precondition</b> (<b>not</b> empty(<span class="texhtml mvar" style="font-style:italic;">c</span>) <b>and</b> <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span>) <b>or</b> (empty(<span class="texhtml mvar" style="font-style:italic;">c</span>) <b>and</b> <span class="texhtml mvar" style="font-style:italic;">I</span>)
    <b>modifies</b> the state of the monitor
    <b>postcondition</b> <span class="texhtml mvar" style="font-style:italic;">I</span>
</pre>
<p>(See Howard<sup id="cite_ref-1976_Howard_4-0" class="reference"><a href="#cite_note-1976_Howard-4">&#91;4&#93;</a></sup> and Buhr <i>et al.</i><sup id="cite_ref-1995_Buhr-Fortier-Coffin_5-0" class="reference"><a href="#cite_note-1995_Buhr-Fortier-Coffin-5">&#91;5&#93;</a></sup> for more.)
</p><p>It is important to note here that the assertion <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is entirely up to the programmer; he or she simply needs to be consistent about what it is.
</p><p>We conclude this section with an example of a thread-safe class using a blocking monitor that implements a bounded, <a href="https://en.wikipedia.org/wiki/Thread_safety" title="Thread safety">thread-safe</a> <a href="https://en.wikipedia.org/wiki/Stack_(data_structure)" class="mw-redirect" title="Stack (data structure)">stack</a>.
</p>
<pre><b>monitor class</b> <i>SharedStack</i> {
    <b>private const</b> capacity&#160;:= 10
    <b>private</b> <i>int</i>[capacity] A
    <b>private</b> <i>int</i> size&#160;:= 0
    <b>invariant</b> 0 &lt;= size <b>and</b> size &lt;= capacity
    <b>private</b> <i>BlockingCondition</i> theStackIsNotEmpty <u>/* <b>associated with</b> 0 &lt; size <b>and</b> size &lt;= capacity */</u>
    <b>private</b> <i>BlockingCondition</i> theStackIsNotFull <u>/* <b>associated with</b> 0 &lt;= size <b>and</b> size &lt; capacity */</u>

    <b>public method</b> push(<i>int</i> value)
    {
        <b>if</b> size = capacity <b>then</b> <b>wait</b> theStackIsNotFull
        <b>assert</b> 0 &lt;= size <b>and</b> size &lt; capacity
        A[size]&#160;:= value&#160;; size&#160;:= size + 1
        <b>assert</b> 0 &lt; size <b>and</b> size &lt;= capacity
        <b>signal</b> theStackIsNotEmpty <b>and return</b>
    }

    <b>public method</b> <i>int</i> pop()
    {
        <b>if</b> size = 0 <b>then</b> <b>wait</b> theStackIsNotEmpty
        <b>assert</b> 0 &lt; size <b>and</b> size &lt;= capacity
        size&#160;:= size - 1&#160;;
        <b>assert</b> 0 &lt;= size <b>and</b> size &lt; capacity
        <b>signal</b> theStackIsNotFull <b>and return</b> A[size]
    }
}
</pre>
<p>Note that, in this example, the thread-safe stack is internally providing a mutex, which, as in the earlier producer/consumer example, is shared by both condition variables, which are checking different conditions on the same concurrent data.  The only difference is that the producer/consumer example assumed a regular non-thread-safe queue and was using a standalone mutex and condition variables, without these details of the monitor abstracted away as is the case here.  In this example, when the "wait" operation is called, it must somehow be supplied with the thread-safe stack's mutex, such as if the "wait" operation is an integrated part of the "monitor class".  Aside from this kind of abstracted functionality, when a "raw" monitor is used, it will <i>always</i> have to include a mutex and a condition variable, with a unique mutex for each condition variable.
</p>
<h3><span class="mw-headline" id="Nonblocking_condition_variables">Nonblocking condition variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=15" title="Edit section: Nonblocking condition variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>With <i>nonblocking condition variables</i> (also called <i>"Mesa style"</i> condition variables or <i>"signal and continue"</i> condition variables), signaling does not cause the signaling thread to lose occupancy of the monitor. Instead the signaled threads are moved to the <code>e</code> queue. There is no need for the <code>s</code> queue.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-Mesa.png" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Monitor_(synchronization)-Mesa.png/200px-Monitor_(synchronization)-Mesa.png" decoding="async" width="200" height="273" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/15/Monitor_%28synchronization%29-Mesa.png/300px-Monitor_%28synchronization%29-Mesa.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/15/Monitor_%28synchronization%29-Mesa.png/400px-Monitor_%28synchronization%29-Mesa.png 2x" data-file-width="837" data-file-height="1142" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-Mesa.png" class="internal" title="Enlarge"></a></div>A Mesa style monitor with two condition variables <code>a</code> and <code>b</code></div></div></div>
<p>With nonblocking condition variables, the <b>signal</b> operation is often called <b>notify</b> &#8212; a terminology we will follow here. It is also common to provide a <b>notify all</b> operation that moves all threads waiting on a condition variable to the <code>e</code> queue.
</p><p>The meaning of various operations are given here. (We assume that each operation runs in mutual exclusion to the others; thus restarted threads do not begin executing until the operation is complete.)
</p>
<pre>enter the monitor:
    enter the method
    <b>if</b> the monitor is locked
        add this thread to e
        block this thread
    <b>else</b>
        lock the monitor

leave the monitor:
    schedule
    <b>return</b> from the method

<b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    add this thread to <span class="texhtml mvar" style="font-style:italic;">c</span>.q
    schedule
    block this thread

<b>notify</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    if there is a thread waiting on <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        select and remove one thread t from <span class="texhtml mvar" style="font-style:italic;">c</span>.q
        (t is called "the notified thread")
        move t to e

<b>notify all</b> <span class="texhtml mvar" style="font-style:italic;">c</span>:
    move all threads waiting on <span class="texhtml mvar" style="font-style:italic;">c</span>.q to e

schedule&#160;:
    <b>if</b> there is a thread on e
        select and remove one thread from e and restart it
    <b>else</b>
        unlock the monitor
</pre>
<p>As a variation on this scheme, the notified thread may be moved to a queue called <code>w</code>, which has priority over <code>e</code>. See Howard<sup id="cite_ref-1976_Howard_4-1" class="reference"><a href="#cite_note-1976_Howard-4">&#91;4&#93;</a></sup> and Buhr <i>et al.</i><sup id="cite_ref-1995_Buhr-Fortier-Coffin_5-1" class="reference"><a href="#cite_note-1995_Buhr-Fortier-Coffin-5">&#91;5&#93;</a></sup> for further discussion.
</p><p>It is possible to associate an assertion <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> with each condition variable <span class="texhtml mvar" style="font-style:italic;">c</span> such that <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is sure to be true upon return from <code><b>wait</b> <span class="texhtml mvar" style="font-style:italic;">c</span></code>. However, one must
ensure that <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> is preserved from the time the <b>notify</b>ing thread gives up occupancy until the notified thread is selected to re-enter the monitor. Between these times there could be activity by other occupants. Thus it is common for <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span> to simply be <i>true</i>.
</p><p>For this reason, it is usually necessary to enclose each <b>wait</b> operation in a loop like this
</p>
<pre><b>while</b> <b>not</b>( <span class="texhtml mvar" style="font-style:italic;">P</span> ) <b>do</b>
    <b>wait</b> c
</pre>
<p>where <span class="texhtml mvar" style="font-style:italic;">P</span> is some condition stronger than <span class="texhtml mvar" style="font-style:italic;">P<sub>c</sub></span>. The operations <code><b>notify</b> <span class="texhtml mvar" style="font-style:italic;">c</span></code> and <code><b>notify all</b> <span class="texhtml mvar" style="font-style:italic;">c</span></code> are treated as "hints" that <span class="texhtml mvar" style="font-style:italic;">P</span> may be true for some waiting thread.
Every iteration of such a loop past the first represents a lost notification; thus with nonblocking monitors, one must be careful to ensure that too many notifications cannot be lost.
</p><p>As an example of "hinting," consider a bank account in which a withdrawing thread will wait until the account has sufficient funds before proceeding
</p>
<pre><b>monitor class</b> <i>Account</i> {
    <b>private</b> <i>int</i> balance&#160;:= 0
    <b>invariant</b> balance &gt;= 0
    <b>private</b> <i>NonblockingCondition</i> balanceMayBeBigEnough

    <b>public method</b> withdraw(<i>int</i> amount)
        <b>precondition</b> amount &gt;= 0
    {
        <b>while</b> balance &lt; amount <b>do</b> <b>wait</b> balanceMayBeBigEnough
        <b>assert</b> balance &gt;= amount
        balance&#160;:= balance - amount
    }

    <b>public method</b> deposit(<i>int</i> amount)
        <b>precondition</b> amount &gt;= 0
    {
        balance&#160;:= balance + amount
        <b>notify all</b> balanceMayBeBigEnough
    }
}
</pre>
<p>In this example, the condition being waited for is a function of the amount to be withdrawn, so it is impossible for a depositing thread to <i>know</i> that it made such a condition true. It makes sense in this case to allow each waiting thread into the monitor (one at a time) to check if its assertion is true.
</p>
<h3><span class="mw-headline" id="Implicit_condition_variable_monitors">Implicit condition variable monitors</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=16" title="Edit section: Implicit condition variable monitors">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-Java.png" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Monitor_(synchronization)-Java.png/200px-Monitor_(synchronization)-Java.png" decoding="async" width="200" height="318" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Monitor_%28synchronization%29-Java.png/300px-Monitor_%28synchronization%29-Java.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Monitor_%28synchronization%29-Java.png/400px-Monitor_%28synchronization%29-Java.png 2x" data-file-width="575" data-file-height="914" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://en.wikipedia.org/wiki/File:Monitor_(synchronization)-Java.png" class="internal" title="Enlarge"></a></div>A Java style monitor</div></div></div>
<p>In the <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="Java (programming language)">Java</a> language, each object may be used as a monitor. Methods requiring mutual exclusion must be explicitly marked with the <b><a href="https://en.wikipedia.org/wiki/Java_keyword" class="mw-redirect" title="Java keyword">synchronized</a></b> keyword. Blocks of code may also be marked by <b><a href="https://en.wikipedia.org/wiki/Java_keyword" class="mw-redirect" title="Java keyword">synchronized</a></b>.
</p><p>Rather than having explicit condition variables, each monitor (i.e., object) is equipped with a single wait queue in addition to its entrance queue. All waiting is done on this single wait queue and all <b>notify</b> and <b>notifyAll</b> operations apply to this queue. This approach has been adopted in other languages, for example <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)" title="C Sharp (programming language)">C#</a>.
</p>
<h3><span class="mw-headline" id="Implicit_signaling">Implicit signaling</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=17" title="Edit section: Implicit signaling">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Another approach to signaling is to omit the <b>signal</b> operation. Whenever a thread leaves the monitor (by returning or waiting), the assertions of all waiting threads are evaluated until one is found to be true. In such a system, condition variables are not needed, but the assertions must be explicitly coded. The contract for wait is
</p>
<pre><b>wait</b> <var style="padding-right: 1px;">P</var>:
    <b>precondition</b> <var style="padding-right: 1px;">I</var>
    <b>modifies</b> the state of the monitor
    <b>postcondition</b> <var style="padding-right: 1px;">P</var> <b>and</b> <var style="padding-right: 1px;">I</var>
</pre>
<h2><span class="mw-headline" id="History">History</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=18" title="Edit section: History">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Brinch Hansen and Hoare developed the monitor concept in the early 1970s, based on earlier ideas of their own and of <a href="https://en.wikipedia.org/wiki/E._W._Dijkstra" class="mw-redirect" title="E. W. Dijkstra">Edsger Dijkstra</a>.<sup id="cite_ref-:2_6-0" class="reference"><a href="#cite_note-:2-6">&#91;6&#93;</a></sup> Brinch Hansen published the first monitor notation, adopting the <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)" title="Class (computer programming)">class</a> concept of <a href="https://en.wikipedia.org/wiki/Simula" title="Simula">Simula 67</a>,<sup id="cite_ref-:0_1-1" class="reference"><a href="#cite_note-:0-1">&#91;1&#93;</a></sup> and invented a queueing mechanism.<sup id="cite_ref-7" class="reference"><a href="#cite_note-7">&#91;7&#93;</a></sup> Hoare refined the rules of process resumption.<sup id="cite_ref-:1_2-1" class="reference"><a href="#cite_note-:1-2">&#91;2&#93;</a></sup> Brinch Hansen created the first implementation of monitors, in <a href="https://en.wikipedia.org/wiki/Concurrent_Pascal" title="Concurrent Pascal">Concurrent Pascal</a>.<sup id="cite_ref-:2_6-1" class="reference"><a href="#cite_note-:2-6">&#91;6&#93;</a></sup> Hoare demonstrated their equivalence to <a href="https://en.wikipedia.org/wiki/Semaphore_(programming)" title="Semaphore (programming)">semaphores</a>.
</p><p>Monitors (and Concurrent Pascal) were soon used to structure process synchronization in the <a href="https://en.wikipedia.org/w/index.php?title=Solo_operating_system&amp;action=edit&amp;redlink=1" class="new" title="Solo operating system (page does not exist)">Solo operating system</a>.<sup id="cite_ref-8" class="reference"><a href="#cite_note-8">&#91;8&#93;</a></sup><sup id="cite_ref-9" class="reference"><a href="#cite_note-9">&#91;9&#93;</a></sup>
</p><p>Programming languages that have supported monitors include:
</p>
<ul><li><a href="https://en.wikipedia.org/wiki/Ada_(programming_language)" title="Ada (programming language)">Ada</a> since Ada 95 (as protected objects)</li>
<li><a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)" title="C Sharp (programming language)">C#</a> (and other languages that use the <a href="https://en.wikipedia.org/wiki/.NET_Framework" title=".NET Framework">.NET Framework</a>)</li>
<li><a href="https://en.wikipedia.org/wiki/Concurrent_Euclid" title="Concurrent Euclid">Concurrent Euclid</a></li>
<li><a href="https://en.wikipedia.org/wiki/Concurrent_Pascal" title="Concurrent Pascal">Concurrent Pascal</a></li>
<li><a href="https://en.wikipedia.org/wiki/D_(programming_language)" title="D (programming language)">D</a></li>
<li><a href="https://en.wikipedia.org/wiki/Delphi_(programming_language)" class="mw-redirect" title="Delphi (programming language)">Delphi</a> (Delphi 2009 and above, via TObject.Monitor)</li>
<li><a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="Java (programming language)">Java</a> (via the wait and notify methods)</li>
<li><a href="https://en.wikipedia.org/wiki/Go_(programming_language)" title="Go (programming language)">Go</a><sup id="cite_ref-10" class="reference"><a href="#cite_note-10">&#91;10&#93;</a></sup><sup id="cite_ref-11" class="reference"><a href="#cite_note-11">&#91;11&#93;</a></sup></li>
<li><a href="https://en.wikipedia.org/wiki/Mesa_(programming_language)" title="Mesa (programming language)">Mesa</a></li>
<li><a href="https://en.wikipedia.org/wiki/Modula-3" title="Modula-3">Modula-3</a></li>
<li><a href="https://en.wikipedia.org/wiki/Python_(programming_language)" title="Python (programming language)">Python</a> (via <a rel="nofollow" class="external text" href="https://docs.python.org/library/threading.html#condition-objects">threading.Condition</a> object)</li>
<li><a href="https://en.wikipedia.org/wiki/Ruby_(programming_language)" title="Ruby (programming language)">Ruby</a></li>
<li><a href="https://en.wikipedia.org/wiki/Squeak" title="Squeak">Squeak</a> Smalltalk</li>
<li><a href="https://en.wikipedia.org/wiki/Turing_(programming_language)" title="Turing (programming language)">Turing</a>, <a href="https://en.wikipedia.org/wiki/Turing+" class="mw-redirect" title="Turing+">Turing+</a>, and <a href="https://en.wikipedia.org/wiki/Object-Oriented_Turing" class="mw-redirect" title="Object-Oriented Turing">Object-Oriented Turing</a></li>
<li><a href="https://en.wikipedia.org/w/index.php?title=%CE%9CC%2B%2B&amp;action=edit&amp;redlink=1" class="new" title="ΜC++ (page does not exist)">µC++</a></li>
<li><a href="https://en.wikipedia.org/wiki/Visual_Prolog" title="Visual Prolog">Visual Prolog</a></li></ul>
<p>A number of libraries have been written that allow monitors to be constructed in languages that do not support them natively. When library calls are used, it is up to the programmer to explicitly mark the start and end of code executed with mutual exclusion. <a href="https://en.wikipedia.org/wiki/POSIX_Threads" class="mw-redirect" title="POSIX Threads">Pthreads</a> is one such library.
</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=19" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a href="https://en.wikipedia.org/wiki/Mutual_exclusion" title="Mutual exclusion">Mutual exclusion</a></li>
<li><a href="https://en.wikipedia.org/wiki/Communicating_sequential_processes" title="Communicating sequential processes">Communicating sequential processes</a> - a later development of monitors by <a href="https://en.wikipedia.org/wiki/C._A._R._Hoare" class="mw-redirect" title="C. A. R. Hoare">C. A. R. Hoare</a></li>
<li><a href="https://en.wikipedia.org/wiki/Semaphore_(programming)" title="Semaphore (programming)">Semaphore (programming)</a></li></ul>
<h2><span class="mw-headline" id="Notes">Notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=20" title="Edit section: Notes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<style data-mw-deduplicate="TemplateStyles:r1011085734">.mw-parser-output .reflist{font-size:90%;margin-bottom:0.5em;list-style-type:decimal}.mw-parser-output .reflist .references{font-size:100%;margin-bottom:0;list-style-type:inherit}.mw-parser-output .reflist-columns-2{column-width:30em}.mw-parser-output .reflist-columns-3{column-width:25em}.mw-parser-output .reflist-columns{margin-top:0.3em}.mw-parser-output .reflist-columns ol{margin-top:0}.mw-parser-output .reflist-columns li{page-break-inside:avoid;break-inside:avoid-column}.mw-parser-output .reflist-upper-alpha{list-style-type:upper-alpha}.mw-parser-output .reflist-upper-roman{list-style-type:upper-roman}.mw-parser-output .reflist-lower-alpha{list-style-type:lower-alpha}.mw-parser-output .reflist-lower-greek{list-style-type:lower-greek}.mw-parser-output .reflist-lower-roman{list-style-type:lower-roman}</style><div class="reflist">
<div class="mw-references-wrap mw-references-columns"><ol class="references">
<li id="cite_note-:0-1"><span class="mw-cite-backlink">^ <a href="#cite_ref-:0_1-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-:0_1-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><style data-mw-deduplicate="TemplateStyles:r1067248974">.mw-parser-output cite.citation{font-style:inherit;word-wrap:break-word}.mw-parser-output .citation q{quotes:"\"""\"""'""'"}.mw-parser-output .citation:target{background-color:rgba(0,127,255,0.133)}.mw-parser-output .id-lock-free a,.mw-parser-output .citation .cs1-lock-free a{background:linear-gradient(transparent,transparent),url("http://upload.wikimedia.org/wikipedia/commons/6/65/Lock-green.svg")right 0.1em center/9px no-repeat}.mw-parser-output .id-lock-limited a,.mw-parser-output .id-lock-registration a,.mw-parser-output .citation .cs1-lock-limited a,.mw-parser-output .citation .cs1-lock-registration a{background:linear-gradient(transparent,transparent),url("http://upload.wikimedia.org/wikipedia/commons/d/d6/Lock-gray-alt-2.svg")right 0.1em center/9px no-repeat}.mw-parser-output .id-lock-subscription a,.mw-parser-output .citation .cs1-lock-subscription a{background:linear-gradient(transparent,transparent),url("http://upload.wikimedia.org/wikipedia/commons/a/aa/Lock-red-alt-2.svg")right 0.1em center/9px no-repeat}.mw-parser-output .cs1-ws-icon a{background:linear-gradient(transparent,transparent),url("http://upload.wikimedia.org/wikipedia/commons/4/4c/Wikisource-logo.svg")right 0.1em center/12px no-repeat}.mw-parser-output .cs1-code{color:inherit;background:inherit;border:none;padding:inherit}.mw-parser-output .cs1-hidden-error{display:none;color:#d33}.mw-parser-output .cs1-visible-error{color:#d33}.mw-parser-output .cs1-maint{display:none;color:#3a3;margin-left:0.3em}.mw-parser-output .cs1-format{font-size:95%}.mw-parser-output .cs1-kern-left{padding-left:0.2em}.mw-parser-output .cs1-kern-right{padding-right:0.2em}.mw-parser-output .citation .mw-selflink{font-weight:inherit}</style><cite id="CITEREFBrinch_Hansen1973" class="citation book cs1">Brinch Hansen, Per (1973). <a rel="nofollow" class="external text" href="http://brinch-hansen.net/papers/1973b.pdf">"7.2 Class Concept"</a> <span class="cs1-format">(PDF)</span>. <span class="cs1-lock-registration" title="Free registration required"><a rel="nofollow" class="external text" href="https://archive.org/details/operatingsystemp0000brin"><i>Operating System Principles</i></a></span>. Prentice Hall. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" class="mw-redirect" title="ISBN (identifier)">ISBN</a>&#160;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-0-13-637843-3" title="Special:BookSources/978-0-13-637843-3"><bdi>978-0-13-637843-3</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=7.2+Class+Concept&amp;rft.btitle=Operating+System+Principles&amp;rft.pub=Prentice+Hall&amp;rft.date=1973&amp;rft.isbn=978-0-13-637843-3&amp;rft.aulast=Brinch+Hansen&amp;rft.aufirst=Per&amp;rft_id=http%3A%2F%2Fbrinch-hansen.net%2Fpapers%2F1973b.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-:1-2"><span class="mw-cite-backlink">^ <a href="#cite_ref-:1_2-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-:1_2-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFHoare1974" class="citation journal cs1"><a href="https://en.wikipedia.org/wiki/Tony_Hoare" title="Tony Hoare">Hoare, C. A. R.</a> (October 1974). "Monitors: an operating system structuring concept". <i><a href="https://en.wikipedia.org/wiki/Communications_of_the_ACM" title="Communications of the ACM">Comm. ACM</a></i>. <b>17</b> (10): 549–557. <a href="https://en.wikipedia.org/wiki/CiteSeerX_(identifier)" class="mw-redirect" title="CiteSeerX (identifier)">CiteSeerX</a>&#160;<span class="cs1-lock-free" title="Freely accessible"><a rel="nofollow" class="external text" href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.24.6394">10.1.1.24.6394</a></span>. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" class="mw-redirect" title="Doi (identifier)">doi</a>:<a rel="nofollow" class="external text" href="https://doi.org/10.1145%2F355620.361161">10.1145/355620.361161</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" class="mw-redirect" title="S2CID (identifier)">S2CID</a>&#160;<a rel="nofollow" class="external text" href="https://api.semanticscholar.org/CorpusID:1005769">1005769</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Comm.+ACM&amp;rft.atitle=Monitors%3A+an+operating+system+structuring+concept&amp;rft.volume=17&amp;rft.issue=10&amp;rft.pages=549-557&amp;rft.date=1974-10&amp;rft_id=%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fsummary%3Fdoi%3D10.1.1.24.6394%23id-name%3DCiteSeerX&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A1005769%23id-name%3DS2CID&amp;rft_id=info%3Adoi%2F10.1145%2F355620.361161&amp;rft.aulast=Hoare&amp;rft.aufirst=C.+A.+R.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><b><a href="#cite_ref-3">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFHansen1975" class="citation journal cs1"><a href="https://en.wikipedia.org/wiki/Per_Brinch_Hansen" title="Per Brinch Hansen">Hansen, P. B.</a> (June 1975). <a rel="nofollow" class="external text" href="https://authors.library.caltech.edu/34677/1/06312840.pdf">"The programming language Concurrent Pascal"</a> <span class="cs1-format">(PDF)</span>. <i><a href="https://en.wikipedia.org/wiki/IEEE_Transactions_on_Software_Engineering" title="IEEE Transactions on Software Engineering">IEEE Trans. Softw. Eng.</a></i> <b>SE-1</b> (2): 199–207. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" class="mw-redirect" title="Doi (identifier)">doi</a>:<a rel="nofollow" class="external text" href="https://doi.org/10.1109%2FTSE.1975.6312840">10.1109/TSE.1975.6312840</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" class="mw-redirect" title="S2CID (identifier)">S2CID</a>&#160;<a rel="nofollow" class="external text" href="https://api.semanticscholar.org/CorpusID:2000388">2000388</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=IEEE+Trans.+Softw.+Eng.&amp;rft.atitle=The+programming+language+Concurrent+Pascal&amp;rft.volume=SE-1&amp;rft.issue=2&amp;rft.pages=199-207&amp;rft.date=1975-06&amp;rft_id=info%3Adoi%2F10.1109%2FTSE.1975.6312840&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A2000388%23id-name%3DS2CID&amp;rft.aulast=Hansen&amp;rft.aufirst=P.+B.&amp;rft_id=https%3A%2F%2Fauthors.library.caltech.edu%2F34677%2F1%2F06312840.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-1976_Howard-4"><span class="mw-cite-backlink">^ <a href="#cite_ref-1976_Howard_4-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-1976_Howard_4-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFHoward1976" class="citation conference cs1">Howard, John H. (1976). <a rel="nofollow" class="external text" href="http://dl.acm.org/citation.cfm?id=807647">"Signaling in monitors"</a>. <i>ICSE '76 Proceedings of the 2nd international conference on Software engineering</i>. International Conference on Software Engineering. Los Alamitos, CA, USA: IEEE Computer Society Press. pp.&#160;47–52.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=conference&amp;rft.atitle=Signaling+in+monitors&amp;rft.btitle=ICSE+%2776+Proceedings+of+the+2nd+international+conference+on+Software+engineering&amp;rft.place=Los+Alamitos%2C+CA%2C+USA&amp;rft.pages=47-52&amp;rft.pub=IEEE+Computer+Society+Press&amp;rft.date=1976&amp;rft.aulast=Howard&amp;rft.aufirst=John+H.&amp;rft_id=http%3A%2F%2Fdl.acm.org%2Fcitation.cfm%3Fid%3D807647&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-1995_Buhr-Fortier-Coffin-5"><span class="mw-cite-backlink">^ <a href="#cite_ref-1995_Buhr-Fortier-Coffin_5-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-1995_Buhr-Fortier-Coffin_5-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFBuhrFortierCoffin1995" class="citation journal cs1">Buhr, Peter A.; Fortier, Michel; Coffin, Michael H. (March 1995). "Monitor classification". <i><a href="https://en.wikipedia.org/wiki/ACM_Computing_Surveys" title="ACM Computing Surveys">ACM Computing Surveys</a></i>. <b>27</b> (1): 63–107. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" class="mw-redirect" title="Doi (identifier)">doi</a>:<a rel="nofollow" class="external text" href="https://doi.org/10.1145%2F214037.214100">10.1145/214037.214100</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" class="mw-redirect" title="S2CID (identifier)">S2CID</a>&#160;<a rel="nofollow" class="external text" href="https://api.semanticscholar.org/CorpusID:207193134">207193134</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=ACM+Computing+Surveys&amp;rft.atitle=Monitor+classification&amp;rft.volume=27&amp;rft.issue=1&amp;rft.pages=63-107&amp;rft.date=1995-03&amp;rft_id=info%3Adoi%2F10.1145%2F214037.214100&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A207193134%23id-name%3DS2CID&amp;rft.aulast=Buhr&amp;rft.aufirst=Peter+A.&amp;rft.au=Fortier%2C+Michel&amp;rft.au=Coffin%2C+Michael+H.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-:2-6"><span class="mw-cite-backlink">^ <a href="#cite_ref-:2_6-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-:2_6-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFHansen1993" class="citation conference cs1"><a href="https://en.wikipedia.org/wiki/Per_Brinch_Hansen" title="Per Brinch Hansen">Hansen, Per Brinch</a> (1993). "Monitors and concurrent Pascal: a personal history". <i>HOPL-II: The second ACM SIGPLAN conference on History of programming languages</i>. History of Programming Languages. New York, NY, USA: <a href="https://en.wikipedia.org/wiki/Association_for_Computing_Machinery" title="Association for Computing Machinery">ACM</a>. pp.&#160;1–35. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" class="mw-redirect" title="Doi (identifier)">doi</a>:<a rel="nofollow" class="external text" href="https://doi.org/10.1145%2F155360.155361">10.1145/155360.155361</a>. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" class="mw-redirect" title="ISBN (identifier)">ISBN</a>&#160;<a href="https://en.wikipedia.org/wiki/Special:BookSources/0-89791-570-4" title="Special:BookSources/0-89791-570-4"><bdi>0-89791-570-4</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=conference&amp;rft.atitle=Monitors+and+concurrent+Pascal%3A+a+personal+history&amp;rft.btitle=HOPL-II%3A+The+second+ACM+SIGPLAN+conference+on+History+of+programming+languages&amp;rft.place=New+York%2C+NY%2C+USA&amp;rft.pages=1-35&amp;rft.pub=ACM&amp;rft.date=1993&amp;rft_id=info%3Adoi%2F10.1145%2F155360.155361&amp;rft.isbn=0-89791-570-4&amp;rft.aulast=Hansen&amp;rft.aufirst=Per+Brinch&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-7"><span class="mw-cite-backlink"><b><a href="#cite_ref-7">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFBrinch_Hansen1972" class="citation journal cs1">Brinch Hansen, Per (July 1972). "Structured multiprogramming (Invited Paper)". <i>Communications of the ACM</i>. <b>15</b> (7): 574–578. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" class="mw-redirect" title="Doi (identifier)">doi</a>:<a rel="nofollow" class="external text" href="https://doi.org/10.1145%2F361454.361473">10.1145/361454.361473</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" class="mw-redirect" title="S2CID (identifier)">S2CID</a>&#160;<a rel="nofollow" class="external text" href="https://api.semanticscholar.org/CorpusID:14125530">14125530</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Communications+of+the+ACM&amp;rft.atitle=Structured+multiprogramming+%28Invited+Paper%29&amp;rft.volume=15&amp;rft.issue=7&amp;rft.pages=574-578&amp;rft.date=1972-07&amp;rft_id=info%3Adoi%2F10.1145%2F361454.361473&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A14125530%23id-name%3DS2CID&amp;rft.aulast=Brinch+Hansen&amp;rft.aufirst=Per&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-8"><span class="mw-cite-backlink"><b><a href="#cite_ref-8">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFBrinch_Hansen1976" class="citation journal cs1">Brinch Hansen, Per (April 1976). <a rel="nofollow" class="external text" href="http://brinch-hansen.net/papers/1976b.pdf">"The Solo operating system: a Concurrent Pascal program"</a> <span class="cs1-format">(PDF)</span>. <i>Software: Practice and Experience</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Software%3A+Practice+and+Experience&amp;rft.atitle=The+Solo+operating+system%3A+a+Concurrent+Pascal+program&amp;rft.date=1976-04&amp;rft.aulast=Brinch+Hansen&amp;rft.aufirst=Per&amp;rft_id=http%3A%2F%2Fbrinch-hansen.net%2Fpapers%2F1976b.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-9"><span class="mw-cite-backlink"><b><a href="#cite_ref-9">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite id="CITEREFBrinch_Hansen1977" class="citation book cs1">Brinch Hansen, Per (1977). <i>The Architecture of Concurrent Programs</i>. Prentice Hall. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" class="mw-redirect" title="ISBN (identifier)">ISBN</a>&#160;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-0-13-044628-2" title="Special:BookSources/978-0-13-044628-2"><bdi>978-0-13-044628-2</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=The+Architecture+of+Concurrent+Programs&amp;rft.pub=Prentice+Hall&amp;rft.date=1977&amp;rft.isbn=978-0-13-044628-2&amp;rft.aulast=Brinch+Hansen&amp;rft.aufirst=Per&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-10"><span class="mw-cite-backlink"><b><a href="#cite_ref-10">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite class="citation web cs1"><a rel="nofollow" class="external text" href="https://golang.org/pkg/sync/#Cond">"sync - The Go Programming Language"</a>. <i>golang.org</i><span class="reference-accessdate">. Retrieved <span class="nowrap">2021-06-17</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=golang.org&amp;rft.atitle=sync+-+The+Go+Programming+Language&amp;rft_id=https%3A%2F%2Fgolang.org%2Fpkg%2Fsync%2F%23Cond&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
<li id="cite_note-11"><span class="mw-cite-backlink"><b><a href="#cite_ref-11">^</a></b></span> <span class="reference-text"><link rel="mw-deduplicated-inline-style" href="https://en.wikipedia.org/wiki/mw-data:TemplateStyles:r1067248974"/><cite class="citation web cs1"><a rel="nofollow" class="external text" href="https://dtyler.io/articles/2021/04/13/sync_cond/">"What's the "sync.Cond" | dtyler.io"</a>. <i>dtyler.io</i><span class="reference-accessdate">. Retrieved <span class="nowrap">2021-06-17</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=dtyler.io&amp;rft.atitle=What%27s+the+%22sync.Cond%22+%7C+dtyler.io&amp;rft_id=https%3A%2F%2Fdtyler.io%2Farticles%2F2021%2F04%2F13%2Fsync_cond%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMonitor+%28synchronization%29" class="Z3988"></span></span>
</li>
</ol></div></div>
<h2><span class="mw-headline" id="Further_reading">Further reading</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=21" title="Edit section: Further reading">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Monitors: an operating system structuring concept, C. A. R. Hoare – <a href="https://en.wikipedia.org/wiki/Communications_of_the_ACM" title="Communications of the ACM">Communications of the ACM</a>, v.17 n.10, p.&#160;549-557, Oct. 1974 <a rel="nofollow" class="external autonumber" href="http://doi.acm.org/10.1145/355620.361161">[1]</a></li>
<li>Monitor classification P.A. Buhr, M. Fortier, M.H. Coffin – <a href="https://en.wikipedia.org/wiki/ACM_Computing_Surveys" title="ACM Computing Surveys">ACM Computing Surveys</a>, 1995 <a rel="nofollow" class="external autonumber" href="http://doi.acm.org/10.1145/214037.214100">[2]</a></li></ul>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit&amp;section=22" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table class="box-External_links plainlinks metadata ambox ambox-style ambox-external_links" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><img alt="" src="http://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png" decoding="async" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/60px-Edit-clear.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/80px-Edit-clear.svg.png 2x" data-file-width="48" data-file-height="48" /></div></td><td class="mbox-text"><div class="mbox-text-span">This article's <b>use of <a href="https://en.wikipedia.org/wiki/Wikipedia:External_links" title="Wikipedia:External links">external links</a> may not follow Wikipedia's policies or guidelines</b>.<span class="hide-when-compact"> Please <a class="external text" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit">improve this article</a> by removing <a href="https://en.wikipedia.org/wiki/Wikipedia:What_Wikipedia_is_not#Wikipedia_is_not_a_mirror_or_a_repository_of_links,_images,_or_media_files" title="Wikipedia:What Wikipedia is not">excessive</a> or <a href="https://en.wikipedia.org/wiki/Wikipedia:External_links" title="Wikipedia:External links">inappropriate</a> external links, and converting useful links where appropriate into <a href="https://en.wikipedia.org/wiki/Wikipedia:Citing_sources" title="Wikipedia:Citing sources">footnote references</a>.</span>  <span class="date-container"><i>(<span class="date">March 2013</span>)</i></span><span class="hide-when-compact"><i> (<small><a href="https://en.wikipedia.org/wiki/Help:Maintenance_template_removal" title="Help:Maintenance template removal">Learn how and when to remove this template message</a></small>)</i></span></div></td></tr></tbody></table>
<ul><li><a rel="nofollow" class="external text" href="http://www.artima.com/insidejvm/ed2/threadsynch.html">Java Monitors (lucid explanation)</a></li>
<li>"<a rel="nofollow" class="external text" href="https://web.archive.org/web/20060830171518/http://www.acm.org/classics/feb96/">Monitors: An Operating System Structuring Concept</a>" by <a href="https://en.wikipedia.org/wiki/C._A._R._Hoare" class="mw-redirect" title="C. A. R. Hoare">C. A. R. Hoare</a></li>
<li>"<a rel="nofollow" class="external text" href="http://portal.acm.org/citation.cfm?id=807647">Signalling in Monitors</a>" by <a href="https://en.wikipedia.org/w/index.php?title=John_H._Howard_(computer_scientist)&amp;action=edit&amp;redlink=1" class="new" title="John H. Howard (computer scientist) (page does not exist)">John H. Howard (computer scientist)</a></li>
<li>"<a rel="nofollow" class="external text" href="http://doi.acm.org/10.1145/360051.360079">Proving Monitors</a>" by <a href="https://en.wikipedia.org/w/index.php?title=John_H._Howard_(computer_scientist)&amp;action=edit&amp;redlink=1" class="new" title="John H. Howard (computer scientist) (page does not exist)">John H. Howard (computer scientist)</a></li>
<li>"<a rel="nofollow" class="external text" href="http://portal.acm.org/citation.cfm?id=358824">Experience with Processes and Monitors in Mesa</a>" by <a href="https://en.wikipedia.org/wiki/Butler_W._Lampson" class="mw-redirect" title="Butler W. Lampson">Butler W. Lampson</a> and <a href="https://en.wikipedia.org/w/index.php?title=David_D._Redell&amp;action=edit&amp;redlink=1" class="new" title="David D. Redell (page does not exist)">David D. Redell</a></li>
<li><a rel="nofollow" class="external text" href="http://www.opengroup.org/onlinepubs/009695399/functions/pthread_cond_wait.html">pthread_cond_wait</a> – description from the Open Group Base Specifications Issue 6, IEEE Std 1003.1</li>
<li>"<a rel="nofollow" class="external text" href="https://web.archive.org/web/20070311234034/http://gd.tuwien.ac.at/languages/c/programming-dmarshall/node31.html#SECTION003125000000000000000">Block on a Condition Variable</a>" by <a href="https://en.wikipedia.org/w/index.php?title=Dave_Marshall_(computer_scientist)&amp;action=edit&amp;redlink=1" class="new" title="Dave Marshall (computer scientist) (page does not exist)">Dave Marshall (computer scientist)</a></li>
<li>"<a rel="nofollow" class="external text" href="https://web.archive.org/web/20060909103157/http://www.cs.wustl.edu/~schmidt/win32-cv-1.html">Strategies for Implementing POSIX Condition Variables on Win32</a>" by <a href="https://en.wikipedia.org/wiki/Douglas_C._Schmidt" title="Douglas C. Schmidt">Douglas C. Schmidt</a> and <a href="https://en.wikipedia.org/w/index.php?title=Irfan_Pyarali&amp;action=edit&amp;redlink=1" class="new" title="Irfan Pyarali (page does not exist)">Irfan Pyarali</a></li>
<li><a rel="nofollow" class="external text" href="http://apr.apache.org/docs/apr/group__apr__thread__cond.html">Condition Variable Routines</a> from the <a href="https://en.wikipedia.org/wiki/Apache_Portable_Runtime" title="Apache Portable Runtime">Apache Portable Runtime</a> Library</li>
<li><a rel="nofollow" class="external text" href="http://wxwidgets.org/manuals/2.6.3/wx_wxcondition.html">wxCondition description</a></li>
<li><a rel="nofollow" class="external text" href="http://www.boost.org/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref">Boost Condition Variables Reference</a></li>
<li><a rel="nofollow" class="external text" href="http://zthread.sourceforge.net/html/classZThread_1_1Condition.html">ZThread Condition Class Reference</a></li>
<li><a rel="nofollow" class="external text" href="http://wefts.sourceforge.net/wefts-apidoc-0.99c/classWefts_1_1Condition.html">Wefts::Condition Class Reference</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20060401000533/http://www.dre.vanderbilt.edu/Doxygen/Stable/ace/classACE__Condition.html">ACE_Condition Class Template Reference</a></li>
<li><a rel="nofollow" class="external text" href="http://doc.qt.io/qt-5/qwaitcondition.html">QWaitCondition Class Reference</a></li>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/commoncpp/docs/refman/html/classConditional.html">Common C++ Conditional Class Reference</a></li>
<li><a rel="nofollow" class="external text" href="http://austria.sourceforge.net/dox/html/classat_1_1ConditionalMutex.html">at::ConditionalMutex Class Reference</a></li>
<li><a rel="nofollow" class="external text" href="http://perldoc.perl.org/threads/shared.html">threads::shared</a> – Perl extension for sharing data structures between threads</li>
<li><a rel="nofollow" class="external free" href="http://msdn.microsoft.com/en-us/library/ms682052(VS.85).aspx">http://msdn.microsoft.com/en-us/library/ms682052(VS.85).aspx</a></li>
<li><a rel="nofollow" class="external text" href="http://wiki.visual-prolog.com/index.php?title=Language_Reference/Monitors">Monitors</a> in <a href="https://en.wikipedia.org/wiki/Visual_Prolog" title="Visual Prolog">Visual Prolog</a>.</li></ul>
<div class="navbox-styles nomobile"><style data-mw-deduplicate="TemplateStyles:r1061467846">.mw-parser-output .navbox{box-sizing:border-box;border:1px solid #a2a9b1;width:100%;clear:both;font-size:88%;text-align:center;padding:1px;margin:1em auto 0}.mw-parser-output .navbox .navbox{margin-top:0}.mw-parser-output .navbox+.navbox,.mw-parser-output .navbox+.navbox-styles+.navbox{margin-top:-1px}.mw-parser-output .navbox-inner,.mw-parser-output .navbox-subgroup{width:100%}.mw-parser-output .navbox-group,.mw-parser-output .navbox-title,.mw-parser-output .navbox-abovebelow{padding:0.25em 1em;line-height:1.5em;text-align:center}.mw-parser-output .navbox-group{white-space:nowrap;text-align:right}.mw-parser-output .navbox,.mw-parser-output .navbox-subgroup{background-color:#fdfdfd}.mw-parser-output .navbox-list{line-height:1.5em;border-color:#fdfdfd}.mw-parser-output .navbox-list-with-group{text-align:left;border-left-width:2px;border-left-style:solid}.mw-parser-output tr+tr>.navbox-abovebelow,.mw-parser-output tr+tr>.navbox-group,.mw-parser-output tr+tr>.navbox-image,.mw-parser-output tr+tr>.navbox-list{border-top:2px solid #fdfdfd}.mw-parser-output .navbox-title{background-color:#ccf}.mw-parser-output .navbox-abovebelow,.mw-parser-output .navbox-group,.mw-parser-output .navbox-subgroup .navbox-title{background-color:#ddf}.mw-parser-output .navbox-subgroup .navbox-group,.mw-parser-output .navbox-subgroup .navbox-abovebelow{background-color:#e6e6ff}.mw-parser-output .navbox-even{background-color:#f7f7f7}.mw-parser-output .navbox-odd{background-color:transparent}.mw-parser-output .navbox .hlist td dl,.mw-parser-output .navbox .hlist td ol,.mw-parser-output .navbox .hlist td ul,.mw-parser-output .navbox td.hlist dl,.mw-parser-output .navbox td.hlist ol,.mw-parser-output .navbox td.hlist ul{padding:0.125em 0}.mw-parser-output .navbox .navbar{display:block;font-size:100%}.mw-parser-output .navbox-title .navbar{float:left;text-align:left;margin-right:0.5em}</style></div><div role="navigation" class="navbox" aria-labelledby="Software_design_patterns" style="padding:3px"><table class="nowraplinks mw-collapsible autocollapse navbox-inner" style="border-spacing:0;background:transparent;color:inherit"><tbody><tr><th scope="col" class="navbox-title" colspan="2"><style data-mw-deduplicate="TemplateStyles:r1063604349">.mw-parser-output .navbar{display:inline;font-size:88%;font-weight:normal}.mw-parser-output .navbar-collapse{float:left;text-align:left}.mw-parser-output .navbar-boxtext{word-spacing:0}.mw-parser-output .navbar ul{display:inline-block;white-space:nowrap;line-height:inherit}.mw-parser-output .navbar-brackets::before{margin-right:-0.125em;content:"[ "}.mw-parser-output .navbar-brackets::after{margin-left:-0.125em;content:" ]"}.mw-parser-output .navbar li{word-spacing:-0.125em}.mw-parser-output .navbar a>span,.mw-parser-output .navbar a>abbr{text-decoration:inherit}.mw-parser-output .navbar-mini abbr{font-variant:small-caps;border-bottom:none;text-decoration:none;cursor:inherit}.mw-parser-output .navbar-ct-full{font-size:114%;margin:0 7em}.mw-parser-output .navbar-ct-mini{font-size:114%;margin:0 4em}</style><div class="navbar plainlinks hlist navbar-mini"><ul><li class="nv-view"><a href="https://en.wikipedia.org/wiki/Template:Design_Patterns_patterns" title="Template:Design Patterns patterns"><abbr title="View this template" style=";;background:none transparent;border:none;box-shadow:none;padding:0;">v</abbr></a></li><li class="nv-talk"><a href="https://en.wikipedia.org/wiki/Template_talk:Design_Patterns_patterns" title="Template talk:Design Patterns patterns"><abbr title="Discuss this template" style=";;background:none transparent;border:none;box-shadow:none;padding:0;">t</abbr></a></li><li class="nv-edit"><a class="external text" href="https://en.wikipedia.org/w/index.php?title=Template:Design_Patterns_patterns&amp;action=edit"><abbr title="Edit this template" style=";;background:none transparent;border:none;box-shadow:none;padding:0;">e</abbr></a></li></ul></div><div id="Software_design_patterns" style="font-size:114%;margin:0 4em"><a href="https://en.wikipedia.org/wiki/Software_design_pattern" title="Software design pattern">Software design patterns</a></div></th></tr><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Design_Patterns" title="Design Patterns">Gang of Four<br />patterns</a></th><td class="navbox-list-with-group navbox-list navbox-odd hlist" style="width:100%;padding:0"><div style="padding:0 0.25em"></div><table class="nowraplinks navbox-subgroup" style="border-spacing:0"><tbody><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Creational_pattern" title="Creational pattern">Creational</a></th><td class="navbox-list-with-group navbox-list navbox-odd" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Abstract_factory_pattern" title="Abstract factory pattern">Abstract factory</a></li>
<li><a href="https://en.wikipedia.org/wiki/Builder_pattern" title="Builder pattern">Builder</a></li>
<li><a href="https://en.wikipedia.org/wiki/Factory_method_pattern" title="Factory method pattern">Factory method</a></li>
<li><a href="https://en.wikipedia.org/wiki/Prototype_pattern" title="Prototype pattern">Prototype</a></li>
<li><a href="https://en.wikipedia.org/wiki/Singleton_pattern" title="Singleton pattern">Singleton</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Structural_pattern" title="Structural pattern">Structural</a></th><td class="navbox-list-with-group navbox-list navbox-even" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Adapter_pattern" title="Adapter pattern">Adapter</a></li>
<li><a href="https://en.wikipedia.org/wiki/Bridge_pattern" title="Bridge pattern">Bridge</a></li>
<li><a href="https://en.wikipedia.org/wiki/Composite_pattern" title="Composite pattern">Composite</a></li>
<li><a href="https://en.wikipedia.org/wiki/Decorator_pattern" title="Decorator pattern">Decorator</a></li>
<li><a href="https://en.wikipedia.org/wiki/Facade_pattern" title="Facade pattern">Facade</a></li>
<li><a href="https://en.wikipedia.org/wiki/Flyweight_pattern" title="Flyweight pattern">Flyweight</a></li>
<li><a href="https://en.wikipedia.org/wiki/Proxy_pattern" title="Proxy pattern">Proxy</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Behavioral_pattern" title="Behavioral pattern">Behavioral</a></th><td class="navbox-list-with-group navbox-list navbox-odd" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern" title="Chain-of-responsibility pattern">Chain of responsibility</a></li>
<li><a href="https://en.wikipedia.org/wiki/Command_pattern" title="Command pattern">Command</a></li>
<li><a href="https://en.wikipedia.org/wiki/Interpreter_pattern" title="Interpreter pattern">Interpreter</a></li>
<li><a href="https://en.wikipedia.org/wiki/Iterator_pattern" title="Iterator pattern">Iterator</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mediator_pattern" title="Mediator pattern">Mediator</a></li>
<li><a href="https://en.wikipedia.org/wiki/Memento_pattern" title="Memento pattern">Memento</a></li>
<li><a href="https://en.wikipedia.org/wiki/Observer_pattern" title="Observer pattern">Observer</a></li>
<li><a href="https://en.wikipedia.org/wiki/State_pattern" title="State pattern">State</a></li>
<li><a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="Strategy pattern">Strategy</a></li>
<li><a href="https://en.wikipedia.org/wiki/Template_method_pattern" title="Template method pattern">Template method</a></li>
<li><a href="https://en.wikipedia.org/wiki/Visitor_pattern" title="Visitor pattern">Visitor</a></li></ul>
</div></td></tr></tbody></table><div></div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Concurrency_pattern" title="Concurrency pattern">Concurrency<br />patterns</a></th><td class="navbox-list-with-group navbox-list navbox-even hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Active_object" title="Active object">Active object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Balking_pattern" title="Balking pattern">Balking</a></li>
<li><a href="https://en.wikipedia.org/wiki/Binding_properties_pattern" title="Binding properties pattern">Binding properties</a></li>
<li><a href="https://en.wikipedia.org/wiki/Double-checked_locking" title="Double-checked locking">Double-checked locking</a></li>
<li><a href="https://en.wikipedia.org/wiki/Asynchronous_method_invocation" title="Asynchronous method invocation">Event-based asynchronous</a></li>
<li><a href="https://en.wikipedia.org/wiki/Guarded_suspension" title="Guarded suspension">Guarded suspension</a></li>
<li><a href="https://en.wikipedia.org/wiki/Join-pattern" title="Join-pattern">Join</a></li>
<li><a href="https://en.wikipedia.org/wiki/Lock_pattern" class="mw-redirect" title="Lock pattern">Lock</a></li>
<li><a class="mw-selflink selflink">Monitor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Proactor_pattern" title="Proactor pattern">Proactor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Reactor_pattern" title="Reactor pattern">Reactor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Readers–writer_lock" title="Readers–writer lock">Read write lock</a></li>
<li><a href="https://en.wikipedia.org/wiki/Scheduler_pattern" class="mw-redirect" title="Scheduler pattern">Scheduler</a></li>
<li><a href="https://en.wikipedia.org/wiki/Thread_pool_pattern" class="mw-redirect" title="Thread pool pattern">Thread pool</a></li>
<li><a href="https://en.wikipedia.org/wiki/Thread-local_storage" title="Thread-local storage">Thread-local storage</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%"><a href="https://en.wikipedia.org/wiki/Architectural_pattern" title="Architectural pattern">Architectural<br />patterns</a></th><td class="navbox-list-with-group navbox-list navbox-odd hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Front_controller" title="Front controller">Front controller</a></li>
<li><a href="https://en.wikipedia.org/wiki/Interceptor_pattern" title="Interceptor pattern">Interceptor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Model–view–controller" title="Model–view–controller">MVC</a></li>
<li><a href="https://en.wikipedia.org/wiki/Action–domain–responder" title="Action–domain–responder">ADR</a></li>
<li><a href="https://en.wikipedia.org/wiki/Entity–component–system" class="mw-redirect" title="Entity–component–system">ECS</a></li>
<li><a href="https://en.wikipedia.org/wiki/Multitier_architecture" title="Multitier architecture"><i>n</i>-tier</a></li>
<li><a href="https://en.wikipedia.org/wiki/Specification_pattern" title="Specification pattern">Specification</a></li>
<li><a href="https://en.wikipedia.org/wiki/Publish–subscribe_pattern" title="Publish–subscribe pattern">Publish–subscribe</a></li>
<li><a href="https://en.wikipedia.org/wiki/Naked_objects" title="Naked objects">Naked objects</a></li>
<li><a href="https://en.wikipedia.org/wiki/Service_locator_pattern" title="Service locator pattern">Service locator</a></li>
<li><a href="https://en.wikipedia.org/wiki/Active_record_pattern" title="Active record pattern">Active record</a></li>
<li><a href="https://en.wikipedia.org/wiki/Identity_map_pattern" title="Identity map pattern">Identity map</a></li>
<li><a href="https://en.wikipedia.org/wiki/Data_access_object" title="Data access object">Data access object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Data_transfer_object" title="Data transfer object">Data transfer object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Inversion_of_control" title="Inversion of control">Inversion of control</a></li>
<li><a href="https://en.wikipedia.org/wiki/JSP_model_2_architecture" title="JSP model 2 architecture">Model 2</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%">Other<br />patterns</th><td class="navbox-list-with-group navbox-list navbox-even hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Blackboard_design_pattern" class="mw-redirect" title="Blackboard design pattern">Blackboard</a></li>
<li><a href="https://en.wikipedia.org/wiki/Business_delegate_pattern" title="Business delegate pattern">Business delegate</a></li>
<li><a href="https://en.wikipedia.org/wiki/Composite_entity_pattern" title="Composite entity pattern">Composite entity</a></li>
<li><a href="https://en.wikipedia.org/wiki/Dependency_injection" title="Dependency injection">Dependency injection</a></li>
<li><a href="https://en.wikipedia.org/wiki/Intercepting_filter_pattern" title="Intercepting filter pattern">Intercepting filter</a></li>
<li><a href="https://en.wikipedia.org/wiki/Lazy_loading" title="Lazy loading">Lazy loading</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mock_object" title="Mock object">Mock object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Null_object_pattern" title="Null object pattern">Null object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Object_pool_pattern" title="Object pool pattern">Object pool</a></li>
<li><a href="https://en.wikipedia.org/wiki/Servant_(design_pattern)" title="Servant (design pattern)">Servant</a></li>
<li><a href="https://en.wikipedia.org/wiki/Twin_pattern" title="Twin pattern">Twin</a></li>
<li><a href="https://en.wikipedia.org/wiki/Type_Tunnel_pattern" title="Type Tunnel pattern">Type tunnel</a></li>
<li><a href="https://en.wikipedia.org/wiki/Method_chaining" title="Method chaining">Method chaining</a></li>
<li><a href="https://en.wikipedia.org/wiki/Delegation_pattern" title="Delegation pattern">Delegation</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%">Books</th><td class="navbox-list-with-group navbox-list navbox-odd hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><i><a href="https://en.wikipedia.org/wiki/Design_Patterns" title="Design Patterns">Design Patterns</a></i></li>
<li><i><a href="https://en.wikipedia.org/wiki/Enterprise_Integration_Patterns" title="Enterprise Integration Patterns">Enterprise Integration Patterns</a></i></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%">People</th><td class="navbox-list-with-group navbox-list navbox-even hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Christopher_Alexander" title="Christopher Alexander">Christopher Alexander</a></li>
<li><a href="https://en.wikipedia.org/wiki/Erich_Gamma" title="Erich Gamma">Erich Gamma</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)" title="Ralph Johnson (computer scientist)">Ralph Johnson</a></li>
<li><a href="https://en.wikipedia.org/wiki/John_Vlissides" title="John Vlissides">John Vlissides</a></li>
<li><a href="https://en.wikipedia.org/wiki/Grady_Booch" title="Grady Booch">Grady Booch</a></li>
<li><a href="https://en.wikipedia.org/wiki/Kent_Beck" title="Kent Beck">Kent Beck</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ward_Cunningham" title="Ward Cunningham">Ward Cunningham</a></li>
<li><a href="https://en.wikipedia.org/wiki/Martin_Fowler_(software_engineer)" title="Martin Fowler (software engineer)">Martin Fowler</a></li>
<li><a href="https://en.wikipedia.org/wiki/Robert_C._Martin" title="Robert C. Martin">Robert Martin</a></li>
<li><a href="https://en.wikipedia.org/wiki/Jim_Coplien" title="Jim Coplien">Jim Coplien</a></li>
<li><a href="https://en.wikipedia.org/wiki/Douglas_C._Schmidt" title="Douglas C. Schmidt">Douglas Schmidt</a></li>
<li><a href="https://en.wikipedia.org/wiki/Linda_Rising" title="Linda Rising">Linda Rising</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%">Communities</th><td class="navbox-list-with-group navbox-list navbox-odd hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/The_Hillside_Group" title="The Hillside Group">The Hillside Group</a></li>
<li><a href="https://en.wikipedia.org/wiki/Portland_Pattern_Repository" title="Portland Pattern Repository">The Portland Pattern Repository</a></li></ul>
</div></td></tr><tr><th scope="row" class="navbox-group" style="width:1%">See also</th><td class="navbox-list-with-group navbox-list navbox-even hlist" style="width:100%;padding:0"><div style="padding:0 0.25em">
<ul><li><a href="https://en.wikipedia.org/wiki/Anti-pattern" title="Anti-pattern">Anti-pattern</a></li>
<li><a href="https://en.wikipedia.org/wiki/Architectural_pattern" title="Architectural pattern">Architectural pattern</a></li></ul>
</div></td></tr></tbody></table></div>
<!-- 
NewPP limit report
Parsed by mw1357
Cached time: 20220501085853
Cache expiry: 1814400
Reduced expiry: false
Complications: [vary‐revision‐sha1]
CPU time usage: 0.642 seconds
Real time usage: 0.760 seconds
Preprocessor visited node count: 1921/1000000
Post‐expand include size: 69118/2097152 bytes
Template argument size: 1555/2097152 bytes
Highest expansion depth: 12/100
Expensive parser function count: 5/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 118068/5000000 bytes
Lua time usage: 0.288/10.000 seconds
Lua memory usage: 5938968/52428800 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  528.704      1 -total
 39.42%  208.394      1 Template:Reflist
 20.99%  110.958      2 Template:Cite_book
 16.78%   88.733      1 Template:Short_description
 16.74%   88.510      1 Template:Design_Patterns_patterns
 16.61%   87.810      2 Template:Navbox
 10.26%   54.230      1 Template:Pagetype
  8.31%   43.947      4 Template:Ambox
  7.61%   40.227      1 Template:Howto
  6.24%   32.980      1 Template:Who
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:1367789-0!canonical and timestamp 20220501085852 and revision id 1077136218. Serialized with JSON.
 -->
</div><noscript><img src="http://en.wikipedia.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;" /></noscript>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;oldid=1077136218">https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;oldid=1077136218</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://en.wikipedia.org/wiki/Help:Category" title="Help:Category">Categories</a>: <ul><li><a href="https://en.wikipedia.org/wiki/Category:Programming_constructs" title="Category:Programming constructs">Programming constructs</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Concurrency_control" title="Category:Concurrency control">Concurrency control</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Software_design_patterns" title="Category:Software design patterns">Software design patterns</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul><li><a href="https://en.wikipedia.org/wiki/Category:Articles_with_short_description" title="Category:Articles with short description">Articles with short description</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Short_description_is_different_from_Wikidata" title="Category:Short description is different from Wikidata">Short description is different from Wikidata</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Articles_needing_cleanup_from_January_2014" title="Category:Articles needing cleanup from January 2014">Articles needing cleanup from January 2014</a></li><li><a href="https://en.wikipedia.org/wiki/Category:All_pages_needing_cleanup" title="Category:All pages needing cleanup">All pages needing cleanup</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Articles_containing_how-to_sections" title="Category:Articles containing how-to sections">Articles containing how-to sections</a></li><li><a href="https://en.wikipedia.org/wiki/Category:All_articles_with_specifically_marked_weasel-worded_phrases" title="Category:All articles with specifically marked weasel-worded phrases">All articles with specifically marked weasel-worded phrases</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Articles_with_specifically_marked_weasel-worded_phrases_from_March_2019" title="Category:Articles with specifically marked weasel-worded phrases from March 2019">Articles with specifically marked weasel-worded phrases from March 2019</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Wikipedia_articles_that_are_too_technical_from_January_2014" title="Category:Wikipedia articles that are too technical from January 2014">Wikipedia articles that are too technical from January 2014</a></li><li><a href="https://en.wikipedia.org/wiki/Category:All_articles_that_are_too_technical" title="Category:All articles that are too technical">All articles that are too technical</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Wikipedia_external_links_cleanup_from_March_2013" title="Category:Wikipedia external links cleanup from March 2013">Wikipedia external links cleanup from March 2013</a></li><li><a href="https://en.wikipedia.org/wiki/Category:Wikipedia_spam_cleanup_from_March_2013" title="Category:Wikipedia spam cleanup from March 2013">Wikipedia spam cleanup from March 2013</a></li></ul></div></div>
	</div>
</div>
<div id='mw-data-after-content'>
	<div class="read-more-container"></div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-anonuserpage" class="mw-list-item"><span title="The user page for the IP address you are editing as">Not logged in</span></li><li id="pt-anontalk" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n"><span>Talk</span></a></li><li id="pt-anoncontribs" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y"><span>Contributions</span></a></li><li id="pt-createaccount" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Special:CreateAccount&amp;returnto=Monitor+%28synchronization%29" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Special:UserLogin&amp;returnto=Monitor+%28synchronization%29" title="You&#039;re encouraged to log in; however, it&#039;s not mandatory. [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="https://en.wikipedia.org/wiki/Monitor_(synchronization)" title="View the content page [c]" accesskey="c"><span>Article</span></a></li><li id="ca-talk" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Talk:Monitor_(synchronization)" rel="discussion" title="Discuss improvements to the content page [t]" accesskey="t"><span>Talk</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="https://en.wikipedia.org/wiki/Monitor_(synchronization)"><span>Read</span></a></li><li id="ca-edit" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=edit" title="Edit this page [e]" accesskey="e"><span>Edit</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://en.wikipedia.org/w/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Wikipedia" aria-label="Search Wikipedia" autocapitalize="sentences" title="Search Wikipedia [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search Wikipedia for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="https://en.wikipedia.org/wiki/Main_Page"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage-description" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Main_Page" icon="home" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li><li id="n-contents" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Wikipedia:Contents" title="Guides to browsing Wikipedia"><span>Contents</span></a></li><li id="n-currentevents" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Portal:Current_events" title="Articles related to current events"><span>Current events</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:Random" icon="die" title="Visit a randomly selected article [x]" accesskey="x"><span>Random article</span></a></li><li id="n-aboutsite" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Wikipedia:About" title="Learn about Wikipedia and how it works"><span>About Wikipedia</span></a></li><li id="n-contactpage" class="mw-list-item"><a href="http://en.wikipedia.org/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia"><span>Contact us</span></a></li><li id="n-sitesupport" class="mw-list-item"><a href="https://donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=C13_en.wikipedia.org&amp;uselang=en" title="Support us by donating to the Wikimedia Foundation"><span>Donate</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-interaction" class="mw-portlet mw-portlet-interaction vector-menu vector-menu-portal portal" aria-labelledby="p-interaction-label" role="navigation" 
	 >
	<label id="p-interaction-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Contribute</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-help" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Help:Contents" icon="help" title="Guidance on how to use and edit Wikipedia"><span>Help</span></a></li><li id="n-introduction" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Help:Introduction" title="Learn how to edit Wikipedia"><span>Learn to edit</span></a></li><li id="n-portal" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Wikipedia:Community_portal" title="The hub for editors"><span>Community portal</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:RecentChanges" icon="recentChanges" title="A list of recent changes to Wikipedia [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-upload" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Wikipedia:File_Upload_Wizard" title="Add images or other media for use on Wikipedia"><span>Upload file</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:WhatLinksHere/Monitor_(synchronization)" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:RecentChangesLinked/Monitor_(synchronization)" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-upload" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Wikipedia:File_Upload_Wizard" title="Upload files [u]" accesskey="u"><span>Upload file</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="https://en.wikipedia.org/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;oldid=1077136218" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-cite" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Special:CiteThisPage&amp;page=Monitor_%28synchronization%29&amp;id=1077136218&amp;wpFormIdentifier=titleform" title="Information on how to cite this page"><span>Cite this page</span></a></li><li id="t-wikibase" class="mw-list-item"><a href="https://www.wikidata.org/wiki/Special:EntityPage/Q1062162" title="Structured data on this page hosted by Wikidata [g]" accesskey="g"><span>Wikidata item</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-coll-print_export" class="mw-portlet mw-portlet-coll-print_export vector-menu vector-menu-portal portal" aria-labelledby="p-coll-print_export-label" role="navigation" 
	 >
	<label id="p-coll-print_export-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Print/export</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="coll-download-as-rl" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Special:DownloadAsPdf&amp;page=Monitor_%28synchronization%29&amp;action=show-download-screen" title="Download this page as a PDF file"><span>Download as PDF</span></a></li><li id="t-print" class="mw-list-item"><a href="https://en.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;printable=yes" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-lang" class="mw-portlet mw-portlet-lang vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<label id="p-lang-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Languages</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-ca mw-list-item"><a href="https://ca.wikipedia.org/wiki/Monitor_(concurrència)" title="Monitor (concurrència) – Catalan" lang="ca" hreflang="ca" class="interlanguage-link-target"><span>Català</span></a></li><li class="interlanguage-link interwiki-cs mw-list-item"><a href="https://cs.wikipedia.org/wiki/Monitor_(synchronizace)" title="Monitor (synchronizace) – Czech" lang="cs" hreflang="cs" class="interlanguage-link-target"><span>Čeština</span></a></li><li class="interlanguage-link interwiki-da mw-list-item"><a href="https://da.wikipedia.org/wiki/Monitor_(datalogi)" title="Monitor (datalogi) – Danish" lang="da" hreflang="da" class="interlanguage-link-target"><span>Dansk</span></a></li><li class="interlanguage-link interwiki-de mw-list-item"><a href="https://de.wikipedia.org/wiki/Monitor_(Informatik)" title="Monitor (Informatik) – German" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li><li class="interlanguage-link interwiki-es mw-list-item"><a href="https://es.wikipedia.org/wiki/Monitor_(concurrencia)" title="Monitor (concurrencia) – Spanish" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li><li class="interlanguage-link interwiki-eu mw-list-item"><a href="https://eu.wikipedia.org/wiki/Monitore_(konkurrentzia)" title="Monitore (konkurrentzia) – Basque" lang="eu" hreflang="eu" class="interlanguage-link-target"><span>Euskara</span></a></li><li class="interlanguage-link interwiki-fa mw-list-item"><a href="https://fa.wikipedia.org/wiki/مانیتور_(همگام‌سازی)" title="مانیتور (همگام‌سازی) – Persian" lang="fa" hreflang="fa" class="interlanguage-link-target"><span>فارسی</span></a></li><li class="interlanguage-link interwiki-fr mw-list-item"><a href="https://fr.wikipedia.org/wiki/Moniteur_(programmation)" title="Moniteur (programmation) – French" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li><li class="interlanguage-link interwiki-ko mw-list-item"><a href="https://ko.wikipedia.org/wiki/모니터_(동기화)" title="모니터 (동기화) – Korean" lang="ko" hreflang="ko" class="interlanguage-link-target"><span>한국어</span></a></li><li class="interlanguage-link interwiki-it mw-list-item"><a href="https://it.wikipedia.org/wiki/Monitor_(sincronizzazione)" title="Monitor (sincronizzazione) – Italian" lang="it" hreflang="it" class="interlanguage-link-target"><span>Italiano</span></a></li><li class="interlanguage-link interwiki-hu mw-list-item"><a href="https://hu.wikipedia.org/wiki/Monitor_(szinkronizáció)" title="Monitor (szinkronizáció) – Hungarian" lang="hu" hreflang="hu" class="interlanguage-link-target"><span>Magyar</span></a></li><li class="interlanguage-link interwiki-nl mw-list-item"><a href="https://nl.wikipedia.org/wiki/Monitor_(gedistribueerd_programmeren)" title="Monitor (gedistribueerd programmeren) – Dutch" lang="nl" hreflang="nl" class="interlanguage-link-target"><span>Nederlands</span></a></li><li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://ja.wikipedia.org/wiki/モニタ_(同期)" title="モニタ (同期) – Japanese" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li><li class="interlanguage-link interwiki-pl mw-list-item"><a href="https://pl.wikipedia.org/wiki/Monitor_(programowanie_współbieżne)" title="Monitor (programowanie współbieżne) – Polish" lang="pl" hreflang="pl" class="interlanguage-link-target"><span>Polski</span></a></li><li class="interlanguage-link interwiki-pt mw-list-item"><a href="https://pt.wikipedia.org/wiki/Monitor_(concorrência)" title="Monitor (concorrência) – Portuguese" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li><li class="interlanguage-link interwiki-ro mw-list-item"><a href="https://ro.wikipedia.org/wiki/Monitor_(sincronizare)" title="Monitor (sincronizare) – Romanian" lang="ro" hreflang="ro" class="interlanguage-link-target"><span>Română</span></a></li><li class="interlanguage-link interwiki-ru mw-list-item"><a href="https://ru.wikipedia.org/wiki/Монитор_(синхронизация)" title="Монитор (синхронизация) – Russian" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li><li class="interlanguage-link interwiki-uk mw-list-item"><a href="https://uk.wikipedia.org/wiki/Монітор_(синхронізація)" title="Монітор (синхронізація) – Ukrainian" lang="uk" hreflang="uk" class="interlanguage-link-target"><span>Українська</span></a></li><li class="interlanguage-link interwiki-zh mw-list-item"><a href="https://zh.wikipedia.org/wiki/監視器_(程序同步化)" title="監視器 (程序同步化) – Chinese" lang="zh" hreflang="zh" class="interlanguage-link-target"><span>中文</span></a></li></ul>
		<div class="after-portlet after-portlet-lang"><span class="wb-langlinks-edit wb-langlinks-link"><a href="https://www.wikidata.org/wiki/Special:EntityPage/Q1062162#sitelinks-wikipedia" title="Edit interlanguage links" class="wbc-editpage">Edit links</a></span></div>
	</div>
</nav>

</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 14 March 2022, at 18:04<span class="anonymous-show">&#160;(UTC)</span>.</li>
	<li id="footer-info-copyright">Text is available under the <a rel="license" href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">Creative Commons Attribution-ShareAlike License 3.0</a><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/" style="display:none;"></a>;
additional terms may apply.  By using this site, you agree to the <a href="http://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a> and <a href="http://foundation.wikimedia.org/wiki/Privacy_policy">Privacy Policy</a>. Wikipedia® is a registered trademark of the <a href="http://www.wikimediafoundation.org/">Wikimedia Foundation, Inc.</a>, a non-profit organization.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="https://en.wikipedia.org/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
	<li id="footer-places-disclaimer"><a href="https://en.wikipedia.org/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
	<li id="footer-places-contact"><a href="http://en.wikipedia.org/wiki/Wikipedia:Contact_us">Contact Wikipedia</a></li>
	<li id="footer-places-mobileview"><a href="http://en.m.wikipedia.org/w/index.php?title=Monitor_(synchronization)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/en.wikipedia.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement">Cookie statement</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/"><img src="https://en.wikipedia.org/static/images/footer/wikimedia-button.png" srcset="/static/images/footer/wikimedia-button-1.5x.png 1.5x, /static/images/footer/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation" loading="lazy" /></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="https://en.wikipedia.org/static/images/footer/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/footer/poweredby_mediawiki_132x47.png 1.5x, /static/images/footer/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.642","walltime":"0.760","ppvisitednodes":{"value":1921,"limit":1000000},"postexpandincludesize":{"value":69118,"limit":2097152},"templateargumentsize":{"value":1555,"limit":2097152},"expansiondepth":{"value":12,"limit":100},"expensivefunctioncount":{"value":5,"limit":500},"unstrip-depth":{"value":1,"limit":20},"unstrip-size":{"value":118068,"limit":5000000},"entityaccesscount":{"value":0,"limit":400},"timingprofile":["100.00%  528.704      1 -total"," 39.42%  208.394      1 Template:Reflist"," 20.99%  110.958      2 Template:Cite_book"," 16.78%   88.733      1 Template:Short_description"," 16.74%   88.510      1 Template:Design_Patterns_patterns"," 16.61%   87.810      2 Template:Navbox"," 10.26%   54.230      1 Template:Pagetype","  8.31%   43.947      4 Template:Ambox","  7.61%   40.227      1 Template:Howto","  6.24%   32.980      1 Template:Who"]},"scribunto":{"limitreport-timeusage":{"value":"0.288","limit":"10.000"},"limitreport-memusage":{"value":5938968,"limit":52428800}},"cachereport":{"origin":"mw1357","timestamp":"20220501085853","ttl":1814400,"transientcontent":false}}});});</script>
<script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Article","name":"Monitor (synchronization)","url":"https:\/\/en.wikipedia.org\/wiki\/Monitor_(synchronization)","sameAs":"http:\/\/www.wikidata.org\/entity\/Q1062162","mainEntity":"http:\/\/www.wikidata.org\/entity\/Q1062162","author":{"@type":"Organization","name":"Contributors to Wikimedia projects"},"publisher":{"@type":"Organization","name":"Wikimedia Foundation, Inc.","logo":{"@type":"ImageObject","url":"https:\/\/www.wikimedia.org\/static\/images\/wmf-hor-googpub.png"}},"datePublished":"2005-01-06T09:40:58Z","dateModified":"2022-03-14T18:04:05Z","headline":"in concurrent programming, a monitor is an object or module intended to be used safely by more than one thread"}</script><script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Article","name":"Monitor (synchronization)","url":"https:\/\/en.wikipedia.org\/wiki\/Monitor_(synchronization)","sameAs":"http:\/\/www.wikidata.org\/entity\/Q1062162","mainEntity":"http:\/\/www.wikidata.org\/entity\/Q1062162","author":{"@type":"Organization","name":"Contributors to Wikimedia projects"},"publisher":{"@type":"Organization","name":"Wikimedia Foundation, Inc.","logo":{"@type":"ImageObject","url":"https:\/\/www.wikimedia.org\/static\/images\/wmf-hor-googpub.png"}},"datePublished":"2005-01-06T09:40:58Z","dateModified":"2022-03-14T18:04:05Z","headline":"in concurrent programming, a monitor is an object or module intended to be used safely by more than one thread"}</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":186,"wgHostname":"mw1451"});});</script>
</body>

<!-- Mirrored from en.wikipedia.org/wiki/Monitor_(synchronization) by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 May 2022 18:31:57 GMT -->
</html>